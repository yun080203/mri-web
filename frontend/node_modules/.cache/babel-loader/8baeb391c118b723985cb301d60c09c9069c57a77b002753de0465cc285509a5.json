{"ast":null,"code":"import React, { useRef, useImperativeHandle, useEffect, useContext, useLayoutEffect, useState, useCallback, useMemo } from 'react';\n\n/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nvar roundNumber = function (num, decimal) {\n  return Number(num.toFixed(decimal));\n};\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nvar checkIsNumber = function (num, defaultValue) {\n  return typeof num === \"number\" ? num : defaultValue;\n};\nvar handleCallback = function (context, event, callback) {\n  if (callback && typeof callback === \"function\") {\n    callback(context, event);\n  }\n};\n\n/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\n/**\n * Functions should return denominator of the target value, which is the next animation step.\n * t is a value from 0 to 1, reflecting the percentage of animation status.\n */\nvar easeOut = function (t) {\n  return -Math.cos(t * Math.PI) / 2 + 0.5;\n};\n// linear\nvar linear = function (t) {\n  return t;\n};\n// accelerating from zero velocity\nvar easeInQuad = function (t) {\n  return t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuad = function (t) {\n  return t * (2 - t);\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuad = function (t) {\n  return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n};\n// accelerating from zero velocity\nvar easeInCubic = function (t) {\n  return t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutCubic = function (t) {\n  return --t * t * t + 1;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutCubic = function (t) {\n  return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n};\n// accelerating from zero velocity\nvar easeInQuart = function (t) {\n  return t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuart = function (t) {\n  return 1 - --t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuart = function (t) {\n  return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n};\n// accelerating from zero velocity\nvar easeInQuint = function (t) {\n  return t * t * t * t * t;\n};\n// decelerating to zero velocity\nvar easeOutQuint = function (t) {\n  return 1 + --t * t * t * t * t;\n};\n// acceleration until halfway, then deceleration\nvar easeInOutQuint = function (t) {\n  return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\n};\nvar animations = {\n  easeOut: easeOut,\n  linear: linear,\n  easeInQuad: easeInQuad,\n  easeOutQuad: easeOutQuad,\n  easeInOutQuad: easeInOutQuad,\n  easeInCubic: easeInCubic,\n  easeOutCubic: easeOutCubic,\n  easeInOutCubic: easeInOutCubic,\n  easeInQuart: easeInQuart,\n  easeOutQuart: easeOutQuart,\n  easeInOutQuart: easeInOutQuart,\n  easeInQuint: easeInQuint,\n  easeOutQuint: easeOutQuint,\n  easeInOutQuint: easeInOutQuint\n};\n\n/* eslint-disable no-param-reassign */\nvar handleCancelAnimationFrame = function (animation) {\n  if (typeof animation === \"number\") {\n    cancelAnimationFrame(animation);\n  }\n};\nvar handleCancelAnimation = function (contextInstance) {\n  if (!contextInstance.mounted) return;\n  handleCancelAnimationFrame(contextInstance.animation);\n  // Clear animation state\n  contextInstance.animate = false;\n  contextInstance.animation = null;\n  contextInstance.velocity = null;\n};\nfunction handleSetupAnimation(contextInstance, animationName, animationTime, callback) {\n  if (!contextInstance.mounted) return;\n  var startTime = new Date().getTime();\n  var lastStep = 1;\n  // if another animation is active\n  handleCancelAnimation(contextInstance);\n  // new animation\n  contextInstance.animation = function () {\n    if (!contextInstance.mounted) {\n      return handleCancelAnimationFrame(contextInstance.animation);\n    }\n    var frameTime = new Date().getTime() - startTime;\n    var animationProgress = frameTime / animationTime;\n    var animationType = animations[animationName];\n    var step = animationType(animationProgress);\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      contextInstance.animation = null;\n    } else if (contextInstance.animation) {\n      callback(step);\n      requestAnimationFrame(contextInstance.animation);\n    }\n  };\n  requestAnimationFrame(contextInstance.animation);\n}\nfunction isValidTargetState(targetState) {\n  var scale = targetState.scale,\n    positionX = targetState.positionX,\n    positionY = targetState.positionY;\n  if (Number.isNaN(scale) || Number.isNaN(positionX) || Number.isNaN(positionY)) {\n    return false;\n  }\n  return true;\n}\nfunction animate(contextInstance, targetState, animationTime, animationName) {\n  var isValid = isValidTargetState(targetState);\n  if (!contextInstance.mounted || !isValid) return;\n  var setTransformState = contextInstance.setTransformState;\n  var _a = contextInstance.transformState,\n    scale = _a.scale,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  var scaleDiff = targetState.scale - scale;\n  var positionXDiff = targetState.positionX - positionX;\n  var positionYDiff = targetState.positionY - positionY;\n  if (animationTime === 0) {\n    setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n  } else {\n    // animation start timestamp\n    handleSetupAnimation(contextInstance, animationName, animationTime, function (step) {\n      var newScale = scale + scaleDiff * step;\n      var newPositionX = positionX + positionXDiff * step;\n      var newPositionY = positionY + positionYDiff * step;\n      setTransformState(newScale, newPositionX, newPositionY);\n    });\n  }\n}\n\n/* eslint-disable no-param-reassign */\nfunction getComponentsSizes(wrapperComponent, contentComponent, newScale) {\n  var wrapperWidth = wrapperComponent.offsetWidth;\n  var wrapperHeight = wrapperComponent.offsetHeight;\n  var contentWidth = contentComponent.offsetWidth;\n  var contentHeight = contentComponent.offsetHeight;\n  var newContentWidth = contentWidth * newScale;\n  var newContentHeight = contentHeight * newScale;\n  var newDiffWidth = wrapperWidth - newContentWidth;\n  var newDiffHeight = wrapperHeight - newContentHeight;\n  return {\n    wrapperWidth: wrapperWidth,\n    wrapperHeight: wrapperHeight,\n    newContentWidth: newContentWidth,\n    newDiffWidth: newDiffWidth,\n    newContentHeight: newContentHeight,\n    newDiffHeight: newDiffHeight\n  };\n}\nvar getBounds = function (wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, centerZoomedOut) {\n  var scaleWidthFactor = wrapperWidth > newContentWidth ? diffWidth * (centerZoomedOut ? 1 : 0.5) : 0;\n  var scaleHeightFactor = wrapperHeight > newContentHeight ? diffHeight * (centerZoomedOut ? 1 : 0.5) : 0;\n  var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\n  var maxPositionX = scaleWidthFactor;\n  var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\n  var maxPositionY = scaleHeightFactor;\n  return {\n    minPositionX: minPositionX,\n    maxPositionX: maxPositionX,\n    minPositionY: minPositionY,\n    maxPositionY: maxPositionY\n  };\n};\nvar calculateBounds = function (contextInstance, newScale) {\n  var wrapperComponent = contextInstance.wrapperComponent,\n    contentComponent = contextInstance.contentComponent;\n  var centerZoomedOut = contextInstance.setup.centerZoomedOut;\n  if (!wrapperComponent || !contentComponent) {\n    throw new Error(\"Components are not mounted\");\n  }\n  var _a = getComponentsSizes(wrapperComponent, contentComponent, newScale),\n    wrapperWidth = _a.wrapperWidth,\n    wrapperHeight = _a.wrapperHeight,\n    newContentWidth = _a.newContentWidth,\n    newDiffWidth = _a.newDiffWidth,\n    newContentHeight = _a.newContentHeight,\n    newDiffHeight = _a.newDiffHeight;\n  var bounds = getBounds(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, Boolean(centerZoomedOut));\n  return bounds;\n};\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nvar boundLimiter = function (value, minBound, maxBound, isActive) {\n  if (!isActive) return roundNumber(value, 2);\n  if (value < minBound) return roundNumber(minBound, 2);\n  if (value > maxBound) return roundNumber(maxBound, 2);\n  return roundNumber(value, 2);\n};\nvar handleCalculateBounds = function (contextInstance, newScale) {\n  var bounds = calculateBounds(contextInstance, newScale);\n  // Save bounds\n  contextInstance.bounds = bounds;\n  return bounds;\n};\nfunction getMouseBoundedPosition(positionX, positionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent) {\n  var minPositionX = bounds.minPositionX,\n    minPositionY = bounds.minPositionY,\n    maxPositionX = bounds.maxPositionX,\n    maxPositionY = bounds.maxPositionY;\n  var paddingX = 0;\n  var paddingY = 0;\n  if (wrapperComponent) {\n    paddingX = paddingValueX;\n    paddingY = paddingValueY;\n  }\n  var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\n  var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\n  return {\n    x: x,\n    y: y\n  };\n}\nfunction handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds) {\n  var _a = contextInstance.transformState,\n    scale = _a.scale,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  var scaleDifference = newScale - scale;\n  if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\") {\n    console.error(\"Mouse X and Y position were not provided!\");\n    return {\n      x: positionX,\n      y: positionY\n    };\n  }\n  var calculatedPositionX = positionX - mouseX * scaleDifference;\n  var calculatedPositionY = positionY - mouseY * scaleDifference;\n  // do not limit to bounds when there is padding animation,\n  // it causes animation strange behaviour\n  var newPositions = getMouseBoundedPosition(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, 0, null);\n  return newPositions;\n}\nfunction checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\n  var scalePadding = enablePadding ? zoomPadding : 0;\n  var minScaleWithPadding = minScale - scalePadding;\n  if (!Number.isNaN(maxScale) && zoom >= maxScale) return maxScale;\n  if (!Number.isNaN(minScale) && zoom <= minScaleWithPadding) return minScaleWithPadding;\n  return zoom;\n}\nvar isPanningStartAllowed = function (contextInstance, event) {\n  var excluded = contextInstance.setup.panning.excluded;\n  var isInitialized = contextInstance.isInitialized,\n    wrapperComponent = contextInstance.wrapperComponent;\n  var target = event.target;\n  var targetIsShadowDom = \"shadowRoot\" in target && \"composedPath\" in event;\n  var isWrapperChild = targetIsShadowDom ? event.composedPath().some(function (el) {\n    if (!(el instanceof Element)) {\n      return false;\n    }\n    return wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(el);\n  }) : wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n  var isAllowed = isInitialized && target && isWrapperChild;\n  if (!isAllowed) return false;\n  var isExcluded = isExcludedNode(target, excluded);\n  if (isExcluded) return false;\n  return true;\n};\nvar isPanningAllowed = function (contextInstance) {\n  var isInitialized = contextInstance.isInitialized,\n    isPanning = contextInstance.isPanning,\n    setup = contextInstance.setup;\n  var disabled = setup.panning.disabled;\n  var isAllowed = isInitialized && isPanning && !disabled;\n  if (!isAllowed) return false;\n  return true;\n};\nvar handlePanningSetup = function (contextInstance, event) {\n  var _a = contextInstance.transformState,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  contextInstance.isPanning = true;\n  // Panning with mouse\n  var x = event.clientX;\n  var y = event.clientY;\n  contextInstance.startCoords = {\n    x: x - positionX,\n    y: y - positionY\n  };\n};\nvar handleTouchPanningSetup = function (contextInstance, event) {\n  var touches = event.touches;\n  var _a = contextInstance.transformState,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  contextInstance.isPanning = true;\n  // Panning with touch\n  var oneFingerTouch = touches.length === 1;\n  if (oneFingerTouch) {\n    var x = touches[0].clientX;\n    var y = touches[0].clientY;\n    contextInstance.startCoords = {\n      x: x - positionX,\n      y: y - positionY\n    };\n  }\n};\nfunction handlePanToBounds(contextInstance) {\n  var _a = contextInstance.transformState,\n    positionX = _a.positionX,\n    positionY = _a.positionY,\n    scale = _a.scale;\n  var _b = contextInstance.setup,\n    disabled = _b.disabled,\n    limitToBounds = _b.limitToBounds,\n    centerZoomedOut = _b.centerZoomedOut;\n  var wrapperComponent = contextInstance.wrapperComponent;\n  if (disabled || !wrapperComponent || !contextInstance.bounds) return;\n  var _c = contextInstance.bounds,\n    maxPositionX = _c.maxPositionX,\n    minPositionX = _c.minPositionX,\n    maxPositionY = _c.maxPositionY,\n    minPositionY = _c.minPositionY;\n  var xChanged = positionX > maxPositionX || positionX < minPositionX;\n  var yChanged = positionY > maxPositionY || positionY < minPositionY;\n  var mousePosX = positionX > maxPositionX ? wrapperComponent.offsetWidth : contextInstance.setup.minPositionX || 0;\n  var mousePosY = positionY > maxPositionY ? wrapperComponent.offsetHeight : contextInstance.setup.minPositionY || 0;\n  var _d = handleCalculateZoomPositions(contextInstance, mousePosX, mousePosY, scale, contextInstance.bounds, limitToBounds || centerZoomedOut),\n    x = _d.x,\n    y = _d.y;\n  return {\n    scale: scale,\n    positionX: xChanged ? x : positionX,\n    positionY: yChanged ? y : positionY\n  };\n}\nfunction handleNewPosition(contextInstance, newPositionX, newPositionY, paddingValueX, paddingValueY) {\n  var limitToBounds = contextInstance.setup.limitToBounds;\n  var wrapperComponent = contextInstance.wrapperComponent,\n    bounds = contextInstance.bounds;\n  var _a = contextInstance.transformState,\n    scale = _a.scale,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  if (wrapperComponent === null || bounds === null || newPositionX === positionX && newPositionY === positionY) {\n    return;\n  }\n  var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent),\n    x = _b.x,\n    y = _b.y;\n  contextInstance.setTransformState(scale, x, y);\n}\nvar getPanningClientPosition = function (contextInstance, clientX, clientY) {\n  var startCoords = contextInstance.startCoords,\n    transformState = contextInstance.transformState;\n  var panning = contextInstance.setup.panning;\n  var lockAxisX = panning.lockAxisX,\n    lockAxisY = panning.lockAxisY;\n  var positionX = transformState.positionX,\n    positionY = transformState.positionY;\n  if (!startCoords) {\n    return {\n      x: positionX,\n      y: positionY\n    };\n  }\n  var mouseX = clientX - startCoords.x;\n  var mouseY = clientY - startCoords.y;\n  var newPositionX = lockAxisX ? positionX : mouseX;\n  var newPositionY = lockAxisY ? positionY : mouseY;\n  return {\n    x: newPositionX,\n    y: newPositionY\n  };\n};\nvar getPaddingValue = function (contextInstance, size) {\n  var setup = contextInstance.setup,\n    transformState = contextInstance.transformState;\n  var scale = transformState.scale;\n  var minScale = setup.minScale,\n    disablePadding = setup.disablePadding;\n  if (size > 0 && scale >= minScale && !disablePadding) {\n    return size;\n  }\n  return 0;\n};\nvar isVelocityCalculationAllowed = function (contextInstance) {\n  var mounted = contextInstance.mounted;\n  var _a = contextInstance.setup,\n    disabled = _a.disabled,\n    velocityAnimation = _a.velocityAnimation;\n  var scale = contextInstance.transformState.scale;\n  var disabledVelocity = velocityAnimation.disabled;\n  var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n  if (!isAllowed) return false;\n  return true;\n};\nvar isVelocityAllowed = function (contextInstance) {\n  var mounted = contextInstance.mounted,\n    velocity = contextInstance.velocity,\n    bounds = contextInstance.bounds;\n  var _a = contextInstance.setup,\n    disabled = _a.disabled,\n    velocityAnimation = _a.velocityAnimation;\n  var scale = contextInstance.transformState.scale;\n  var disabledVelocity = velocityAnimation.disabled;\n  var isAllowed = !disabledVelocity || scale > 1 || !disabled || mounted;\n  if (!isAllowed) return false;\n  if (!velocity || !bounds) return false;\n  return true;\n};\nfunction getVelocityMoveTime(contextInstance, velocity) {\n  var velocityAnimation = contextInstance.setup.velocityAnimation;\n  var equalToMove = velocityAnimation.equalToMove,\n    animationTime = velocityAnimation.animationTime,\n    sensitivity = velocityAnimation.sensitivity;\n  if (equalToMove) {\n    return animationTime * velocity * sensitivity;\n  }\n  return animationTime;\n}\nfunction getVelocityPosition(newPosition, startPosition, currentPosition, isLocked, limitToBounds, minPosition, maxPosition, minTarget, maxTarget, step) {\n  if (limitToBounds) {\n    if (startPosition > maxPosition && currentPosition > maxPosition) {\n      var calculatedPosition = maxPosition + (newPosition - maxPosition) * step;\n      if (calculatedPosition > maxTarget) return maxTarget;\n      if (calculatedPosition < maxPosition) return maxPosition;\n      return calculatedPosition;\n    }\n    if (startPosition < minPosition && currentPosition < minPosition) {\n      var calculatedPosition = minPosition + (newPosition - minPosition) * step;\n      if (calculatedPosition < minTarget) return minTarget;\n      if (calculatedPosition > minPosition) return minPosition;\n      return calculatedPosition;\n    }\n  }\n  if (isLocked) return startPosition;\n  return boundLimiter(newPosition, minPosition, maxPosition, limitToBounds);\n}\nfunction getSizeMultiplier(wrapperComponent, equalToMove) {\n  var defaultMultiplier = 1;\n  if (equalToMove) {\n    return Math.min(defaultMultiplier, wrapperComponent.offsetWidth / window.innerWidth);\n  }\n  return defaultMultiplier;\n}\nfunction handleCalculateVelocity(contextInstance, position) {\n  var isAllowed = isVelocityCalculationAllowed(contextInstance);\n  if (!isAllowed) {\n    return;\n  }\n  var lastMousePosition = contextInstance.lastMousePosition,\n    velocityTime = contextInstance.velocityTime,\n    setup = contextInstance.setup;\n  var wrapperComponent = contextInstance.wrapperComponent;\n  var equalToMove = setup.velocityAnimation.equalToMove;\n  var now = Date.now();\n  if (lastMousePosition && velocityTime && wrapperComponent) {\n    var sizeMultiplier = getSizeMultiplier(wrapperComponent, equalToMove);\n    var distanceX = position.x - lastMousePosition.x;\n    var distanceY = position.y - lastMousePosition.y;\n    var velocityX = distanceX / sizeMultiplier;\n    var velocityY = distanceY / sizeMultiplier;\n    var interval = now - velocityTime;\n    var speed = distanceX * distanceX + distanceY * distanceY;\n    var velocity = Math.sqrt(speed) / interval;\n    contextInstance.velocity = {\n      velocityX: velocityX,\n      velocityY: velocityY,\n      total: velocity\n    };\n  }\n  contextInstance.lastMousePosition = position;\n  contextInstance.velocityTime = now;\n}\nfunction handleVelocityPanning(contextInstance) {\n  var velocity = contextInstance.velocity,\n    bounds = contextInstance.bounds,\n    setup = contextInstance.setup,\n    wrapperComponent = contextInstance.wrapperComponent;\n  var isAllowed = isVelocityAllowed(contextInstance);\n  if (!isAllowed || !velocity || !bounds || !wrapperComponent) {\n    return;\n  }\n  var velocityX = velocity.velocityX,\n    velocityY = velocity.velocityY,\n    total = velocity.total;\n  var maxPositionX = bounds.maxPositionX,\n    minPositionX = bounds.minPositionX,\n    maxPositionY = bounds.maxPositionY,\n    minPositionY = bounds.minPositionY;\n  var limitToBounds = setup.limitToBounds,\n    alignmentAnimation = setup.alignmentAnimation;\n  var zoomAnimation = setup.zoomAnimation,\n    panning = setup.panning;\n  var lockAxisY = panning.lockAxisY,\n    lockAxisX = panning.lockAxisX;\n  var animationType = zoomAnimation.animationType;\n  var sizeX = alignmentAnimation.sizeX,\n    sizeY = alignmentAnimation.sizeY,\n    velocityAlignmentTime = alignmentAnimation.velocityAlignmentTime;\n  var alignAnimationTime = velocityAlignmentTime;\n  var moveAnimationTime = getVelocityMoveTime(contextInstance, total);\n  var finalAnimationTime = Math.max(moveAnimationTime, alignAnimationTime);\n  var paddingValueX = getPaddingValue(contextInstance, sizeX);\n  var paddingValueY = getPaddingValue(contextInstance, sizeY);\n  var paddingX = paddingValueX * wrapperComponent.offsetWidth / 100;\n  var paddingY = paddingValueY * wrapperComponent.offsetHeight / 100;\n  var maxTargetX = maxPositionX + paddingX;\n  var minTargetX = minPositionX - paddingX;\n  var maxTargetY = maxPositionY + paddingY;\n  var minTargetY = minPositionY - paddingY;\n  var startState = contextInstance.transformState;\n  var startTime = new Date().getTime();\n  handleSetupAnimation(contextInstance, animationType, finalAnimationTime, function (step) {\n    var _a = contextInstance.transformState,\n      scale = _a.scale,\n      positionX = _a.positionX,\n      positionY = _a.positionY;\n    var frameTime = new Date().getTime() - startTime;\n    var animationProgress = frameTime / alignAnimationTime;\n    var alignAnimation = animations[alignmentAnimation.animationType];\n    var alignStep = 1 - alignAnimation(Math.min(1, animationProgress));\n    var customStep = 1 - step;\n    var newPositionX = positionX + velocityX * customStep;\n    var newPositionY = positionY + velocityY * customStep;\n    var currentPositionX = getVelocityPosition(newPositionX, startState.positionX, positionX, lockAxisX, limitToBounds, minPositionX, maxPositionX, minTargetX, maxTargetX, alignStep);\n    var currentPositionY = getVelocityPosition(newPositionY, startState.positionY, positionY, lockAxisY, limitToBounds, minPositionY, maxPositionY, minTargetY, maxTargetY, alignStep);\n    if (positionX !== newPositionX || positionY !== newPositionY) {\n      contextInstance.setTransformState(scale, currentPositionX, currentPositionY);\n    }\n  });\n}\nfunction handlePanningStart(contextInstance, event) {\n  var scale = contextInstance.transformState.scale;\n  handleCancelAnimation(contextInstance);\n  handleCalculateBounds(contextInstance, scale);\n  if (window.TouchEvent !== undefined && event instanceof TouchEvent) {\n    handleTouchPanningSetup(contextInstance, event);\n  } else {\n    handlePanningSetup(contextInstance, event);\n  }\n}\nfunction handleAlignToBounds(contextInstance, customAnimationTime) {\n  var scale = contextInstance.transformState.scale;\n  var _a = contextInstance.setup,\n    minScale = _a.minScale,\n    alignmentAnimation = _a.alignmentAnimation;\n  var disabled = alignmentAnimation.disabled,\n    sizeX = alignmentAnimation.sizeX,\n    sizeY = alignmentAnimation.sizeY,\n    animationTime = alignmentAnimation.animationTime,\n    animationType = alignmentAnimation.animationType;\n  var isDisabled = disabled || scale < minScale || !sizeX && !sizeY;\n  if (isDisabled) return;\n  var targetState = handlePanToBounds(contextInstance);\n  if (targetState) {\n    animate(contextInstance, targetState, customAnimationTime !== null && customAnimationTime !== void 0 ? customAnimationTime : animationTime, animationType);\n  }\n}\nfunction handlePanning(contextInstance, clientX, clientY) {\n  var startCoords = contextInstance.startCoords,\n    setup = contextInstance.setup;\n  var _a = setup.alignmentAnimation,\n    sizeX = _a.sizeX,\n    sizeY = _a.sizeY;\n  if (!startCoords) return;\n  var _b = getPanningClientPosition(contextInstance, clientX, clientY),\n    x = _b.x,\n    y = _b.y;\n  var paddingValueX = getPaddingValue(contextInstance, sizeX);\n  var paddingValueY = getPaddingValue(contextInstance, sizeY);\n  handleCalculateVelocity(contextInstance, {\n    x: x,\n    y: y\n  });\n  handleNewPosition(contextInstance, x, y, paddingValueX, paddingValueY);\n}\nfunction handlePanningEnd(contextInstance) {\n  if (contextInstance.isPanning) {\n    var velocityDisabled = contextInstance.setup.panning.velocityDisabled;\n    var velocity = contextInstance.velocity,\n      wrapperComponent = contextInstance.wrapperComponent,\n      contentComponent = contextInstance.contentComponent;\n    contextInstance.isPanning = false;\n    contextInstance.animate = false;\n    contextInstance.animation = null;\n    var wrapperRect = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.getBoundingClientRect();\n    var contentRect = contentComponent === null || contentComponent === void 0 ? void 0 : contentComponent.getBoundingClientRect();\n    var wrapperWidth = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.width) || 0;\n    var wrapperHeight = (wrapperRect === null || wrapperRect === void 0 ? void 0 : wrapperRect.height) || 0;\n    var contentWidth = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.width) || 0;\n    var contentHeight = (contentRect === null || contentRect === void 0 ? void 0 : contentRect.height) || 0;\n    var isZoomed = wrapperWidth < contentWidth || wrapperHeight < contentHeight;\n    var shouldAnimate = !velocityDisabled && velocity && (velocity === null || velocity === void 0 ? void 0 : velocity.total) > 0.1 && isZoomed;\n    if (shouldAnimate) {\n      handleVelocityPanning(contextInstance);\n    } else {\n      handleAlignToBounds(contextInstance);\n    }\n  }\n}\nfunction handleZoomToPoint(contextInstance, scale, mouseX, mouseY) {\n  var _a = contextInstance.setup,\n    minScale = _a.minScale,\n    maxScale = _a.maxScale,\n    limitToBounds = _a.limitToBounds;\n  var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, 0, false);\n  var bounds = handleCalculateBounds(contextInstance, newScale);\n  var _b = handleCalculateZoomPositions(contextInstance, mouseX, mouseY, newScale, bounds, limitToBounds),\n    x = _b.x,\n    y = _b.y;\n  return {\n    scale: newScale,\n    positionX: x,\n    positionY: y\n  };\n}\nfunction handleAlignToScaleBounds(contextInstance, mousePositionX, mousePositionY) {\n  var scale = contextInstance.transformState.scale;\n  var wrapperComponent = contextInstance.wrapperComponent;\n  var _a = contextInstance.setup,\n    minScale = _a.minScale,\n    limitToBounds = _a.limitToBounds,\n    zoomAnimation = _a.zoomAnimation;\n  var disabled = zoomAnimation.disabled,\n    animationTime = zoomAnimation.animationTime,\n    animationType = zoomAnimation.animationType;\n  var isDisabled = disabled || scale >= minScale;\n  if (scale >= 1 || limitToBounds) {\n    // fire fit to bounds animation\n    handleAlignToBounds(contextInstance);\n  }\n  if (isDisabled || !wrapperComponent || !contextInstance.mounted) return;\n  var mouseX = mousePositionX || wrapperComponent.offsetWidth / 2;\n  var mouseY = mousePositionY || wrapperComponent.offsetHeight / 2;\n  var targetState = handleZoomToPoint(contextInstance, minScale, mouseX, mouseY);\n  if (targetState) {\n    animate(contextInstance, targetState, animationTime, animationType);\n  }\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\nvar initialState = {\n  previousScale: 1,\n  scale: 1,\n  positionX: 0,\n  positionY: 0\n};\nvar initialSetup = {\n  disabled: false,\n  minPositionX: null,\n  maxPositionX: null,\n  minPositionY: null,\n  maxPositionY: null,\n  minScale: 1,\n  maxScale: 8,\n  limitToBounds: true,\n  centerZoomedOut: false,\n  centerOnInit: false,\n  disablePadding: false,\n  smooth: true,\n  wheel: {\n    step: 0.2,\n    disabled: false,\n    smoothStep: 0.001,\n    wheelDisabled: false,\n    touchPadDisabled: false,\n    activationKeys: [],\n    excluded: []\n  },\n  panning: {\n    disabled: false,\n    velocityDisabled: false,\n    lockAxisX: false,\n    lockAxisY: false,\n    allowLeftClickPan: true,\n    allowMiddleClickPan: true,\n    allowRightClickPan: true,\n    wheelPanning: false,\n    activationKeys: [],\n    excluded: []\n  },\n  pinch: {\n    step: 5,\n    disabled: false,\n    excluded: []\n  },\n  doubleClick: {\n    disabled: false,\n    step: 0.7,\n    mode: \"zoomIn\",\n    animationType: \"easeOut\",\n    animationTime: 200,\n    excluded: []\n  },\n  zoomAnimation: {\n    disabled: false,\n    size: 0.4,\n    animationTime: 200,\n    animationType: \"easeOut\"\n  },\n  alignmentAnimation: {\n    disabled: false,\n    sizeX: 100,\n    sizeY: 100,\n    animationTime: 200,\n    velocityAlignmentTime: 400,\n    animationType: \"easeOut\"\n  },\n  velocityAnimation: {\n    disabled: false,\n    sensitivity: 1,\n    animationTime: 400,\n    animationType: \"easeOut\",\n    equalToMove: true\n  }\n};\nvar baseClasses = {\n  wrapperClass: \"react-transform-wrapper\",\n  contentClass: \"react-transform-component\"\n};\nvar createState = function (props) {\n  var _a, _b, _c, _d;\n  return {\n    previousScale: (_a = props.initialScale) !== null && _a !== void 0 ? _a : initialState.scale,\n    scale: (_b = props.initialScale) !== null && _b !== void 0 ? _b : initialState.scale,\n    positionX: (_c = props.initialPositionX) !== null && _c !== void 0 ? _c : initialState.positionX,\n    positionY: (_d = props.initialPositionY) !== null && _d !== void 0 ? _d : initialState.positionY\n  };\n};\nvar createSetup = function (props) {\n  var newSetup = __assign({}, initialSetup);\n  Object.keys(props).forEach(function (key) {\n    var validValue = typeof props[key] !== \"undefined\";\n    var validParameter = typeof initialSetup[key] !== \"undefined\";\n    if (validParameter && validValue) {\n      var dataType = Object.prototype.toString.call(initialSetup[key]);\n      var isObject = dataType === \"[object Object]\";\n      var isArray = dataType === \"[object Array]\";\n      if (isObject) {\n        newSetup[key] = __assign(__assign({}, initialSetup[key]), props[key]);\n      } else if (isArray) {\n        newSetup[key] = __spreadArray(__spreadArray([], initialSetup[key], true), props[key], true);\n      } else {\n        newSetup[key] = props[key];\n      }\n    }\n  });\n  return newSetup;\n};\nvar handleCalculateButtonZoom = function (contextInstance, delta, step) {\n  var scale = contextInstance.transformState.scale;\n  var wrapperComponent = contextInstance.wrapperComponent,\n    setup = contextInstance.setup;\n  var maxScale = setup.maxScale,\n    minScale = setup.minScale,\n    zoomAnimation = setup.zoomAnimation,\n    smooth = setup.smooth;\n  var size = zoomAnimation.size;\n  if (!wrapperComponent) {\n    throw new Error(\"Wrapper is not mounted\");\n  }\n  var targetScale = smooth ? scale * Math.exp(delta * step) : scale + delta * step;\n  var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, false);\n  return newScale;\n};\nfunction handleZoomToViewCenter(contextInstance, delta, step, animationTime, animationType) {\n  var wrapperComponent = contextInstance.wrapperComponent;\n  var _a = contextInstance.transformState,\n    scale = _a.scale,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  if (!wrapperComponent) return console.error(\"No WrapperComponent found\");\n  var wrapperWidth = wrapperComponent.offsetWidth;\n  var wrapperHeight = wrapperComponent.offsetHeight;\n  var mouseX = (wrapperWidth / 2 - positionX) / scale;\n  var mouseY = (wrapperHeight / 2 - positionY) / scale;\n  var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n  var targetState = handleZoomToPoint(contextInstance, newScale, mouseX, mouseY);\n  if (!targetState) {\n    return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n  }\n  animate(contextInstance, targetState, animationTime, animationType);\n}\nfunction resetTransformations(contextInstance, animationTime, animationType, onResetTransformation) {\n  var setup = contextInstance.setup,\n    wrapperComponent = contextInstance.wrapperComponent;\n  var limitToBounds = setup.limitToBounds;\n  var initialTransformation = createState(contextInstance.props);\n  var _a = contextInstance.transformState,\n    scale = _a.scale,\n    positionX = _a.positionX,\n    positionY = _a.positionY;\n  if (!wrapperComponent) return;\n  var newBounds = calculateBounds(contextInstance, initialTransformation.scale);\n  var boundedPositions = getMouseBoundedPosition(initialTransformation.positionX, initialTransformation.positionY, newBounds, limitToBounds, 0, 0, wrapperComponent);\n  var newState = {\n    scale: initialTransformation.scale,\n    positionX: boundedPositions.x,\n    positionY: boundedPositions.y\n  };\n  if (scale === initialTransformation.scale && positionX === initialTransformation.positionX && positionY === initialTransformation.positionY) {\n    return;\n  }\n  onResetTransformation === null || onResetTransformation === void 0 ? void 0 : onResetTransformation();\n  animate(contextInstance, newState, animationTime, animationType);\n}\nfunction getOffset(element, wrapper, content, state) {\n  var offset = element.getBoundingClientRect();\n  var wrapperOffset = wrapper.getBoundingClientRect();\n  var contentOffset = content.getBoundingClientRect();\n  var xOff = wrapperOffset.x * state.scale;\n  var yOff = wrapperOffset.y * state.scale;\n  return {\n    x: (offset.x - contentOffset.x + xOff) / state.scale,\n    y: (offset.y - contentOffset.y + yOff) / state.scale\n  };\n}\nfunction calculateZoomToNode(contextInstance, node, customZoom) {\n  var wrapperComponent = contextInstance.wrapperComponent,\n    contentComponent = contextInstance.contentComponent,\n    transformState = contextInstance.transformState;\n  var _a = contextInstance.setup,\n    limitToBounds = _a.limitToBounds,\n    minScale = _a.minScale,\n    maxScale = _a.maxScale;\n  if (!wrapperComponent || !contentComponent) return transformState;\n  var wrapperRect = wrapperComponent.getBoundingClientRect();\n  var nodeRect = node.getBoundingClientRect();\n  var nodeOffset = getOffset(node, wrapperComponent, contentComponent, transformState);\n  var nodeLeft = nodeOffset.x;\n  var nodeTop = nodeOffset.y;\n  var nodeWidth = nodeRect.width / transformState.scale;\n  var nodeHeight = nodeRect.height / transformState.scale;\n  var scaleX = wrapperComponent.offsetWidth / nodeWidth;\n  var scaleY = wrapperComponent.offsetHeight / nodeHeight;\n  var newScale = checkZoomBounds(customZoom || Math.min(scaleX, scaleY), minScale, maxScale, 0, false);\n  var offsetX = (wrapperRect.width - nodeWidth * newScale) / 2;\n  var offsetY = (wrapperRect.height - nodeHeight * newScale) / 2;\n  var newPositionX = (wrapperRect.left - nodeLeft) * newScale + offsetX;\n  var newPositionY = (wrapperRect.top - nodeTop) * newScale + offsetY;\n  var bounds = calculateBounds(contextInstance, newScale);\n  var _b = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, 0, 0, wrapperComponent),\n    x = _b.x,\n    y = _b.y;\n  return {\n    positionX: x,\n    positionY: y,\n    scale: newScale\n  };\n}\nvar zoomIn = function (contextInstance) {\n  return function (step, animationTime, animationType) {\n    if (step === void 0) {\n      step = 0.5;\n    }\n    if (animationTime === void 0) {\n      animationTime = 300;\n    }\n    if (animationType === void 0) {\n      animationType = \"easeOut\";\n    }\n    handleZoomToViewCenter(contextInstance, 1, step, animationTime, animationType);\n  };\n};\nvar zoomOut = function (contextInstance) {\n  return function (step, animationTime, animationType) {\n    if (step === void 0) {\n      step = 0.5;\n    }\n    if (animationTime === void 0) {\n      animationTime = 300;\n    }\n    if (animationType === void 0) {\n      animationType = \"easeOut\";\n    }\n    handleZoomToViewCenter(contextInstance, -1, step, animationTime, animationType);\n  };\n};\nvar setTransform = function (contextInstance) {\n  return function (newPositionX, newPositionY, newScale, animationTime, animationType) {\n    if (animationTime === void 0) {\n      animationTime = 300;\n    }\n    if (animationType === void 0) {\n      animationType = \"easeOut\";\n    }\n    var _a = contextInstance.transformState,\n      positionX = _a.positionX,\n      positionY = _a.positionY,\n      scale = _a.scale;\n    var wrapperComponent = contextInstance.wrapperComponent,\n      contentComponent = contextInstance.contentComponent;\n    var disabled = contextInstance.setup.disabled;\n    if (disabled || !wrapperComponent || !contentComponent) return;\n    var targetState = {\n      positionX: Number.isNaN(newPositionX) ? positionX : newPositionX,\n      positionY: Number.isNaN(newPositionY) ? positionY : newPositionY,\n      scale: Number.isNaN(newScale) ? scale : newScale\n    };\n    animate(contextInstance, targetState, animationTime, animationType);\n  };\n};\nvar resetTransform = function (contextInstance) {\n  return function (animationTime, animationType) {\n    if (animationTime === void 0) {\n      animationTime = 200;\n    }\n    if (animationType === void 0) {\n      animationType = \"easeOut\";\n    }\n    resetTransformations(contextInstance, animationTime, animationType);\n  };\n};\nvar centerView = function (contextInstance) {\n  return function (scale, animationTime, animationType) {\n    if (animationTime === void 0) {\n      animationTime = 200;\n    }\n    if (animationType === void 0) {\n      animationType = \"easeOut\";\n    }\n    var transformState = contextInstance.transformState,\n      wrapperComponent = contextInstance.wrapperComponent,\n      contentComponent = contextInstance.contentComponent;\n    if (wrapperComponent && contentComponent) {\n      var targetState = getCenterPosition(scale || transformState.scale, wrapperComponent, contentComponent);\n      animate(contextInstance, targetState, animationTime, animationType);\n    }\n  };\n};\nvar zoomToElement = function (contextInstance) {\n  return function (node, scale, animationTime, animationType) {\n    if (animationTime === void 0) {\n      animationTime = 600;\n    }\n    if (animationType === void 0) {\n      animationType = \"easeOut\";\n    }\n    handleCancelAnimation(contextInstance);\n    var wrapperComponent = contextInstance.wrapperComponent;\n    var target = typeof node === \"string\" ? document.getElementById(node) : node;\n    if (wrapperComponent && target && wrapperComponent.contains(target)) {\n      var targetState = calculateZoomToNode(contextInstance, target, scale);\n      animate(contextInstance, targetState, animationTime, animationType);\n    }\n  };\n};\nvar getControls = function (contextInstance) {\n  return {\n    instance: contextInstance,\n    zoomIn: zoomIn(contextInstance),\n    zoomOut: zoomOut(contextInstance),\n    setTransform: setTransform(contextInstance),\n    resetTransform: resetTransform(contextInstance),\n    centerView: centerView(contextInstance),\n    zoomToElement: zoomToElement(contextInstance)\n  };\n};\nvar getState = function (contextInstance) {\n  return {\n    instance: contextInstance,\n    state: contextInstance.transformState\n  };\n};\nvar getContext = function (contextInstance) {\n  var ref = {};\n  Object.assign(ref, getState(contextInstance));\n  Object.assign(ref, getControls(contextInstance));\n  return ref;\n};\n\n// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nvar passiveSupported = false;\nfunction makePassiveEventOption() {\n  try {\n    var options = {\n      get passive() {\n        // This function will be called when the browser\n        //   attempts to access the passive property.\n        passiveSupported = true;\n        return false;\n      }\n    };\n    return options;\n  } catch (err) {\n    passiveSupported = false;\n    return passiveSupported;\n  }\n}\nvar matchPrefix = \".\".concat(baseClasses.wrapperClass);\nvar isExcludedNode = function (node, excluded) {\n  return excluded.some(function (exclude) {\n    return node.matches(\"\".concat(matchPrefix, \" \").concat(exclude, \", \").concat(matchPrefix, \" .\").concat(exclude, \", \").concat(matchPrefix, \" \").concat(exclude, \" *, \").concat(matchPrefix, \" .\").concat(exclude, \" *\"));\n  });\n};\nvar cancelTimeout = function (timeout) {\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n};\nvar getTransformStyles = function (x, y, scale) {\n  // Standard translate prevents blurry svg on the safari\n  return \"translate(\".concat(x, \"px, \").concat(y, \"px) scale(\").concat(scale, \")\");\n};\nvar getMatrixTransformStyles = function (x, y, scale) {\n  // The shorthand for matrix does not work for Safari hence the need to explicitly use matrix3d\n  // Refer to https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix\n  var a = scale;\n  var b = 0;\n  var c = 0;\n  var d = scale;\n  var tx = x;\n  var ty = y;\n  return \"matrix3d(\".concat(a, \", \").concat(b, \", 0, 0, \").concat(c, \", \").concat(d, \", 0, 0, 0, 0, 1, 0, \").concat(tx, \", \").concat(ty, \", 0, 1)\");\n};\nvar getCenterPosition = function (scale, wrapperComponent, contentComponent) {\n  var contentWidth = contentComponent.offsetWidth * scale;\n  var contentHeight = contentComponent.offsetHeight * scale;\n  var centerPositionX = (wrapperComponent.offsetWidth - contentWidth) / 2;\n  var centerPositionY = (wrapperComponent.offsetHeight - contentHeight) / 2;\n  return {\n    scale: scale,\n    positionX: centerPositionX,\n    positionY: centerPositionY\n  };\n};\nfunction mergeRefs(refs) {\n  return function (value) {\n    refs.forEach(function (ref) {\n      if (typeof ref === \"function\") {\n        ref(value);\n      } else if (ref != null) {\n        ref.current = value;\n      }\n    });\n  };\n}\nvar isWheelAllowed = function (contextInstance, event) {\n  var _a = contextInstance.setup.wheel,\n    disabled = _a.disabled,\n    wheelDisabled = _a.wheelDisabled,\n    touchPadDisabled = _a.touchPadDisabled,\n    excluded = _a.excluded;\n  var isInitialized = contextInstance.isInitialized,\n    isPanning = contextInstance.isPanning;\n  var target = event.target;\n  var isAllowed = isInitialized && !isPanning && !disabled && target;\n  if (!isAllowed) return false;\n  // Event ctrlKey detects if touchpad action is executing wheel or pinch gesture\n  if (wheelDisabled && !event.ctrlKey) return false;\n  if (touchPadDisabled && event.ctrlKey) return false;\n  var isExcluded = isExcludedNode(target, excluded);\n  if (isExcluded) return false;\n  return true;\n};\nvar getDeltaY = function (event) {\n  if (event) {\n    return event.deltaY < 0 ? 1 : -1;\n  }\n  return 0;\n};\nfunction getDelta(event, customDelta) {\n  var deltaY = getDeltaY(event);\n  var delta = checkIsNumber(customDelta, deltaY);\n  return delta;\n}\nfunction getMousePosition(event, contentComponent, scale) {\n  var contentRect = contentComponent.getBoundingClientRect();\n  var mouseX = 0;\n  var mouseY = 0;\n  if (\"clientX\" in event) {\n    // mouse position x, y over wrapper component\n    mouseX = (event.clientX - contentRect.left) / scale;\n    mouseY = (event.clientY - contentRect.top) / scale;\n  } else {\n    var touch = event.touches[0];\n    mouseX = (touch.clientX - contentRect.left) / scale;\n    mouseY = (touch.clientY - contentRect.top) / scale;\n  }\n  if (Number.isNaN(mouseX) || Number.isNaN(mouseY)) console.error(\"No mouse or touch offset found\");\n  return {\n    x: mouseX,\n    y: mouseY\n  };\n}\nvar handleCalculateWheelZoom = function (contextInstance, delta, step, disable, getTarget) {\n  var scale = contextInstance.transformState.scale;\n  var wrapperComponent = contextInstance.wrapperComponent,\n    setup = contextInstance.setup;\n  var maxScale = setup.maxScale,\n    minScale = setup.minScale,\n    zoomAnimation = setup.zoomAnimation,\n    disablePadding = setup.disablePadding;\n  var size = zoomAnimation.size,\n    disabled = zoomAnimation.disabled;\n  if (!wrapperComponent) {\n    throw new Error(\"Wrapper is not mounted\");\n  }\n  var targetScale = scale + delta * step;\n  if (getTarget) return targetScale;\n  var paddingEnabled = disable ? false : !disabled;\n  var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled && !disablePadding);\n  return newScale;\n};\nvar handleWheelZoomStop = function (contextInstance, event) {\n  var previousWheelEvent = contextInstance.previousWheelEvent;\n  var scale = contextInstance.transformState.scale;\n  var _a = contextInstance.setup,\n    maxScale = _a.maxScale,\n    minScale = _a.minScale;\n  if (!previousWheelEvent) return false;\n  if (scale < maxScale || scale > minScale) return true;\n  if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  if (previousWheelEvent.deltaY > 0 && previousWheelEvent.deltaY < event.deltaY) return true;\n  if (previousWheelEvent.deltaY < 0 && previousWheelEvent.deltaY > event.deltaY) return true;\n  if (Math.sign(previousWheelEvent.deltaY) !== Math.sign(event.deltaY)) return true;\n  return false;\n};\nvar isPinchStartAllowed = function (contextInstance, event) {\n  var _a = contextInstance.setup.pinch,\n    disabled = _a.disabled,\n    excluded = _a.excluded;\n  var isInitialized = contextInstance.isInitialized;\n  var target = event.target;\n  var isAllowed = isInitialized && !disabled && target;\n  if (!isAllowed) return false;\n  var isExcluded = isExcludedNode(target, excluded);\n  if (isExcluded) return false;\n  return true;\n};\nvar isPinchAllowed = function (contextInstance) {\n  var disabled = contextInstance.setup.pinch.disabled;\n  var isInitialized = contextInstance.isInitialized,\n    pinchStartDistance = contextInstance.pinchStartDistance;\n  var isAllowed = isInitialized && !disabled && pinchStartDistance;\n  if (!isAllowed) return false;\n  return true;\n};\nvar calculateTouchMidPoint = function (event, scale, contentComponent) {\n  var contentRect = contentComponent.getBoundingClientRect();\n  var touches = event.touches;\n  var firstPointX = roundNumber(touches[0].clientX - contentRect.left, 5);\n  var firstPointY = roundNumber(touches[0].clientY - contentRect.top, 5);\n  var secondPointX = roundNumber(touches[1].clientX - contentRect.left, 5);\n  var secondPointY = roundNumber(touches[1].clientY - contentRect.top, 5);\n  return {\n    x: (firstPointX + secondPointX) / 2 / scale,\n    y: (firstPointY + secondPointY) / 2 / scale\n  };\n};\nvar getTouchDistance = function (event) {\n  return Math.sqrt(Math.pow(event.touches[0].pageX - event.touches[1].pageX, 2) + Math.pow(event.touches[0].pageY - event.touches[1].pageY, 2));\n};\nvar calculatePinchZoom = function (contextInstance, currentDistance) {\n  var pinchStartScale = contextInstance.pinchStartScale,\n    pinchStartDistance = contextInstance.pinchStartDistance,\n    setup = contextInstance.setup;\n  var maxScale = setup.maxScale,\n    minScale = setup.minScale,\n    zoomAnimation = setup.zoomAnimation,\n    disablePadding = setup.disablePadding;\n  var size = zoomAnimation.size,\n    disabled = zoomAnimation.disabled;\n  if (!pinchStartScale || pinchStartDistance === null || !currentDistance) {\n    throw new Error(\"Pinch touches distance was not provided\");\n  }\n  if (currentDistance < 0) {\n    return contextInstance.transformState.scale;\n  }\n  var touchProportion = currentDistance / pinchStartDistance;\n  var scaleDifference = touchProportion * pinchStartScale;\n  return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled && !disablePadding);\n};\nvar wheelStopEventTime = 160;\nvar wheelAnimationTime = 100;\nvar handleWheelStart = function (contextInstance, event) {\n  var _a = contextInstance.props,\n    onWheelStart = _a.onWheelStart,\n    onZoomStart = _a.onZoomStart;\n  if (!contextInstance.wheelStopEventTimer) {\n    handleCancelAnimation(contextInstance);\n    handleCallback(getContext(contextInstance), event, onWheelStart);\n    handleCallback(getContext(contextInstance), event, onZoomStart);\n  }\n};\nvar handleWheelZoom = function (contextInstance, event) {\n  var _a = contextInstance.props,\n    onWheel = _a.onWheel,\n    onZoom = _a.onZoom;\n  var contentComponent = contextInstance.contentComponent,\n    setup = contextInstance.setup,\n    transformState = contextInstance.transformState;\n  var scale = transformState.scale;\n  var limitToBounds = setup.limitToBounds,\n    centerZoomedOut = setup.centerZoomedOut,\n    zoomAnimation = setup.zoomAnimation,\n    wheel = setup.wheel,\n    disablePadding = setup.disablePadding,\n    smooth = setup.smooth;\n  var size = zoomAnimation.size,\n    disabled = zoomAnimation.disabled;\n  var step = wheel.step,\n    smoothStep = wheel.smoothStep;\n  if (!contentComponent) {\n    throw new Error(\"Component not mounted\");\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  var delta = getDelta(event, null);\n  var zoomStep = smooth ? smoothStep * Math.abs(event.deltaY) : step;\n  var newScale = handleCalculateWheelZoom(contextInstance, delta, zoomStep, !event.ctrlKey);\n  // if scale not change\n  if (scale === newScale) return;\n  var bounds = handleCalculateBounds(contextInstance, newScale);\n  var mousePosition = getMousePosition(event, contentComponent, scale);\n  var isPaddingDisabled = disabled || size === 0 || centerZoomedOut || disablePadding;\n  var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n  var _b = handleCalculateZoomPositions(contextInstance, mousePosition.x, mousePosition.y, newScale, bounds, isLimitedToBounds),\n    x = _b.x,\n    y = _b.y;\n  contextInstance.previousWheelEvent = event;\n  contextInstance.setTransformState(newScale, x, y);\n  handleCallback(getContext(contextInstance), event, onWheel);\n  handleCallback(getContext(contextInstance), event, onZoom);\n};\nvar handleWheelStop = function (contextInstance, event) {\n  var _a = contextInstance.props,\n    onWheelStop = _a.onWheelStop,\n    onZoomStop = _a.onZoomStop;\n  // fire animation\n  cancelTimeout(contextInstance.wheelAnimationTimer);\n  contextInstance.wheelAnimationTimer = setTimeout(function () {\n    if (!contextInstance.mounted) return;\n    handleAlignToScaleBounds(contextInstance, event.x, event.y);\n    contextInstance.wheelAnimationTimer = null;\n  }, wheelAnimationTime);\n  // Wheel stop event\n  var hasStoppedZooming = handleWheelZoomStop(contextInstance, event);\n  if (hasStoppedZooming) {\n    cancelTimeout(contextInstance.wheelStopEventTimer);\n    contextInstance.wheelStopEventTimer = setTimeout(function () {\n      if (!contextInstance.mounted) return;\n      contextInstance.wheelStopEventTimer = null;\n      handleCallback(getContext(contextInstance), event, onWheelStop);\n      handleCallback(getContext(contextInstance), event, onZoomStop);\n    }, wheelStopEventTime);\n  }\n};\nvar getTouchCenter = function (event) {\n  var totalX = 0;\n  var totalY = 0;\n  // Sum up the positions of all touches\n  for (var i = 0; i < 2; i += 1) {\n    totalX += event.touches[i].clientX;\n    totalY += event.touches[i].clientY;\n  }\n  // Calculate the average position\n  var x = totalX / 2;\n  var y = totalY / 2;\n  return {\n    x: x,\n    y: y\n  };\n};\nvar handlePinchStart = function (contextInstance, event) {\n  var distance = getTouchDistance(event);\n  contextInstance.pinchStartDistance = distance;\n  contextInstance.lastDistance = distance;\n  contextInstance.pinchStartScale = contextInstance.transformState.scale;\n  contextInstance.isPanning = false;\n  var center = getTouchCenter(event);\n  contextInstance.pinchLastCenterX = center.x;\n  contextInstance.pinchLastCenterY = center.y;\n  handleCancelAnimation(contextInstance);\n};\nvar handlePinchZoom = function (contextInstance, event) {\n  var contentComponent = contextInstance.contentComponent,\n    pinchStartDistance = contextInstance.pinchStartDistance,\n    wrapperComponent = contextInstance.wrapperComponent;\n  var scale = contextInstance.transformState.scale;\n  var _a = contextInstance.setup,\n    limitToBounds = _a.limitToBounds,\n    centerZoomedOut = _a.centerZoomedOut,\n    zoomAnimation = _a.zoomAnimation,\n    alignmentAnimation = _a.alignmentAnimation;\n  var disabled = zoomAnimation.disabled,\n    size = zoomAnimation.size;\n  // if one finger starts from outside of wrapper\n  if (pinchStartDistance === null || !contentComponent) return;\n  var midPoint = calculateTouchMidPoint(event, scale, contentComponent);\n  // if touches goes off of the wrapper element\n  if (!Number.isFinite(midPoint.x) || !Number.isFinite(midPoint.y)) return;\n  var currentDistance = getTouchDistance(event);\n  var newScale = calculatePinchZoom(contextInstance, currentDistance);\n  var center = getTouchCenter(event);\n  // pan should be scale invariant.\n  var panX = center.x - (contextInstance.pinchLastCenterX || 0);\n  var panY = center.y - (contextInstance.pinchLastCenterY || 0);\n  if (newScale === scale && panX === 0 && panY === 0) return;\n  contextInstance.pinchLastCenterX = center.x;\n  contextInstance.pinchLastCenterY = center.y;\n  var bounds = handleCalculateBounds(contextInstance, newScale);\n  var isPaddingDisabled = disabled || size === 0 || centerZoomedOut;\n  var isLimitedToBounds = limitToBounds && isPaddingDisabled;\n  var _b = handleCalculateZoomPositions(contextInstance, midPoint.x, midPoint.y, newScale, bounds, isLimitedToBounds),\n    x = _b.x,\n    y = _b.y;\n  contextInstance.pinchMidpoint = midPoint;\n  contextInstance.lastDistance = currentDistance;\n  var sizeX = alignmentAnimation.sizeX,\n    sizeY = alignmentAnimation.sizeY;\n  var paddingValueX = getPaddingValue(contextInstance, sizeX);\n  var paddingValueY = getPaddingValue(contextInstance, sizeY);\n  var newPositionX = x + panX;\n  var newPositionY = y + panY;\n  var _c = getMouseBoundedPosition(newPositionX, newPositionY, bounds, limitToBounds, paddingValueX, paddingValueY, wrapperComponent),\n    finalX = _c.x,\n    finalY = _c.y;\n  contextInstance.setTransformState(newScale, finalX, finalY);\n};\nvar handlePinchStop = function (contextInstance) {\n  var pinchMidpoint = contextInstance.pinchMidpoint;\n  contextInstance.velocity = null;\n  contextInstance.lastDistance = null;\n  contextInstance.pinchMidpoint = null;\n  contextInstance.pinchStartScale = null;\n  contextInstance.pinchStartDistance = null;\n  handleAlignToScaleBounds(contextInstance, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.x, pinchMidpoint === null || pinchMidpoint === void 0 ? void 0 : pinchMidpoint.y);\n};\nvar handleDoubleClickStop = function (contextInstance, event) {\n  var onZoomStop = contextInstance.props.onZoomStop;\n  var animationTime = contextInstance.setup.doubleClick.animationTime;\n  cancelTimeout(contextInstance.doubleClickStopEventTimer);\n  contextInstance.doubleClickStopEventTimer = setTimeout(function () {\n    contextInstance.doubleClickStopEventTimer = null;\n    handleCallback(getContext(contextInstance), event, onZoomStop);\n  }, animationTime);\n};\nvar handleDoubleClickResetMode = function (contextInstance, event) {\n  var _a = contextInstance.props,\n    onZoomStart = _a.onZoomStart,\n    onZoom = _a.onZoom;\n  var _b = contextInstance.setup.doubleClick,\n    animationTime = _b.animationTime,\n    animationType = _b.animationType;\n  handleCallback(getContext(contextInstance), event, onZoomStart);\n  resetTransformations(contextInstance, animationTime, animationType, function () {\n    return handleCallback(getContext(contextInstance), event, onZoom);\n  });\n  handleDoubleClickStop(contextInstance, event);\n};\nfunction getDoubleClickScale(mode, scale) {\n  if (mode === \"toggle\") {\n    return scale === 1 ? 1 : -1;\n  }\n  return mode === \"zoomOut\" ? -1 : 1;\n}\nfunction handleDoubleClick(contextInstance, event) {\n  var setup = contextInstance.setup,\n    doubleClickStopEventTimer = contextInstance.doubleClickStopEventTimer,\n    transformState = contextInstance.transformState,\n    contentComponent = contextInstance.contentComponent;\n  var scale = transformState.scale;\n  var _a = contextInstance.props,\n    onZoomStart = _a.onZoomStart,\n    onZoom = _a.onZoom;\n  var _b = setup.doubleClick,\n    disabled = _b.disabled,\n    mode = _b.mode,\n    step = _b.step,\n    animationTime = _b.animationTime,\n    animationType = _b.animationType;\n  if (disabled) return;\n  if (doubleClickStopEventTimer) return;\n  if (mode === \"reset\") {\n    return handleDoubleClickResetMode(contextInstance, event);\n  }\n  if (!contentComponent) return console.error(\"No ContentComponent found\");\n  var delta = getDoubleClickScale(mode, contextInstance.transformState.scale);\n  var newScale = handleCalculateButtonZoom(contextInstance, delta, step);\n  // stop execution when scale didn't change\n  if (scale === newScale) return;\n  handleCallback(getContext(contextInstance), event, onZoomStart);\n  var mousePosition = getMousePosition(event, contentComponent, scale);\n  var targetState = handleZoomToPoint(contextInstance, newScale, mousePosition.x, mousePosition.y);\n  if (!targetState) {\n    return console.error(\"Error during zoom event. New transformation state was not calculated.\");\n  }\n  handleCallback(getContext(contextInstance), event, onZoom);\n  animate(contextInstance, targetState, animationTime, animationType);\n  handleDoubleClickStop(contextInstance, event);\n}\nvar isDoubleClickAllowed = function (contextInstance, event) {\n  var isInitialized = contextInstance.isInitialized,\n    setup = contextInstance.setup,\n    wrapperComponent = contextInstance.wrapperComponent;\n  var _a = setup.doubleClick,\n    disabled = _a.disabled,\n    excluded = _a.excluded;\n  var target = event.target;\n  var isWrapperChild = wrapperComponent === null || wrapperComponent === void 0 ? void 0 : wrapperComponent.contains(target);\n  var isAllowed = isInitialized && target && isWrapperChild && !disabled;\n  if (!isAllowed) return false;\n  var isExcluded = isExcludedNode(target, excluded);\n  if (isExcluded) return false;\n  return true;\n};\nvar ZoomPanPinch = /** @class */function () {\n  function ZoomPanPinch(props) {\n    var _this = this;\n    this.mounted = true;\n    this.pinchLastCenterX = null;\n    this.pinchLastCenterY = null;\n    this.onChangeCallbacks = new Set();\n    this.onInitCallbacks = new Set();\n    // Components\n    this.wrapperComponent = null;\n    this.contentComponent = null;\n    // Initialization\n    this.isInitialized = false;\n    this.bounds = null;\n    // wheel helpers\n    this.previousWheelEvent = null;\n    this.wheelStopEventTimer = null;\n    this.wheelAnimationTimer = null;\n    // panning helpers\n    this.isPanning = false;\n    this.isWheelPanning = false;\n    this.startCoords = null;\n    this.lastTouch = null;\n    // pinch helpers\n    this.distance = null;\n    this.lastDistance = null;\n    this.pinchStartDistance = null;\n    this.pinchStartScale = null;\n    this.pinchMidpoint = null;\n    // double click helpers\n    this.doubleClickStopEventTimer = null;\n    // velocity helpers\n    this.velocity = null;\n    this.velocityTime = null;\n    this.lastMousePosition = null;\n    // animations helpers\n    this.animate = false;\n    this.animation = null;\n    this.maxBounds = null;\n    // key press\n    this.pressedKeys = {};\n    this.mount = function () {\n      _this.initializeWindowEvents();\n    };\n    this.unmount = function () {\n      _this.cleanupWindowEvents();\n    };\n    this.update = function (newProps) {\n      _this.props = newProps;\n      handleCalculateBounds(_this, _this.transformState.scale);\n      _this.setup = createSetup(newProps);\n    };\n    this.initializeWindowEvents = function () {\n      var _a, _b;\n      var passive = makePassiveEventOption();\n      var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n      var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n      (_b = _this.wrapperComponent) === null || _b === void 0 ? void 0 : _b.addEventListener(\"wheel\", _this.onWheelPanning, passive);\n      // Panning on window to allow panning when mouse is out of component wrapper\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousedown\", _this.onPanningStart, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mousemove\", _this.onPanning, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"mouseup\", _this.onPanningStop, passive);\n      currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.addEventListener(\"mouseleave\", _this.clearPanning, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.addEventListener(\"keydown\", _this.setKeyPressed, passive);\n    };\n    this.cleanupWindowEvents = function () {\n      var _a, _b;\n      var passive = makePassiveEventOption();\n      var currentDocument = (_a = _this.wrapperComponent) === null || _a === void 0 ? void 0 : _a.ownerDocument;\n      var currentWindow = currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.defaultView;\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousedown\", _this.onPanningStart, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mousemove\", _this.onPanning, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"mouseup\", _this.onPanningStop, passive);\n      currentDocument === null || currentDocument === void 0 ? void 0 : currentDocument.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keyup\", _this.setKeyUnPressed, passive);\n      currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.removeEventListener(\"keydown\", _this.setKeyPressed, passive);\n      document.removeEventListener(\"mouseleave\", _this.clearPanning, passive);\n      handleCancelAnimation(_this);\n      (_b = _this.observer) === null || _b === void 0 ? void 0 : _b.disconnect();\n    };\n    this.handleInitializeWrapperEvents = function (wrapper) {\n      // Zooming events on wrapper\n      var passive = makePassiveEventOption();\n      wrapper.addEventListener(\"wheel\", _this.onWheelZoom, passive);\n      wrapper.addEventListener(\"dblclick\", _this.onDoubleClick, passive);\n      wrapper.addEventListener(\"touchstart\", _this.onTouchPanningStart, passive);\n      wrapper.addEventListener(\"touchmove\", _this.onTouchPanning, passive);\n      wrapper.addEventListener(\"touchend\", _this.onTouchPanningStop, passive);\n    };\n    this.handleInitialize = function (wrapper, contentComponent) {\n      var isCentered = false;\n      var centerOnInit = _this.setup.centerOnInit;\n      var hasTarget = function (entries, target) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n          var entry = entries_1[_i];\n          if (entry.target === target) {\n            return true;\n          }\n        }\n        return false;\n      };\n      _this.applyTransformation();\n      _this.onInitCallbacks.forEach(function (callback) {\n        callback(getContext(_this));\n      });\n      _this.observer = new ResizeObserver(function (entries) {\n        if (hasTarget(entries, wrapper) || hasTarget(entries, contentComponent)) {\n          if (centerOnInit && !isCentered) {\n            var currentWidth = contentComponent.offsetWidth;\n            var currentHeight = contentComponent.offsetHeight;\n            if (currentWidth > 0 || currentHeight > 0) {\n              isCentered = true;\n              _this.setCenter();\n            }\n          } else {\n            handleCancelAnimation(_this);\n            handleCalculateBounds(_this, _this.transformState.scale);\n            handleAlignToBounds(_this, 0);\n          }\n        }\n      });\n      // Start observing the target node for configured mutations\n      _this.observer.observe(wrapper);\n      _this.observer.observe(contentComponent);\n    };\n    /// ///////\n    // Zoom\n    /// ///////\n    this.onWheelZoom = function (event) {\n      var disabled = _this.setup.disabled;\n      if (disabled) return;\n      var isAllowed = isWheelAllowed(_this, event);\n      if (!isAllowed) return;\n      var keysPressed = _this.isPressingKeys(_this.setup.wheel.activationKeys);\n      if (!keysPressed) return;\n      handleWheelStart(_this, event);\n      handleWheelZoom(_this, event);\n      handleWheelStop(_this, event);\n    };\n    /// ///////\n    // Pan\n    /// ///////\n    this.onWheelPanning = function (event) {\n      var _a = _this.setup,\n        disabled = _a.disabled,\n        wheel = _a.wheel,\n        panning = _a.panning;\n      if (!_this.wrapperComponent || !_this.contentComponent || disabled || !wheel.wheelDisabled || panning.disabled || !panning.wheelPanning || event.ctrlKey) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      var _b = _this.transformState,\n        positionX = _b.positionX,\n        positionY = _b.positionY;\n      var mouseX = positionX - event.deltaX;\n      var mouseY = positionY - event.deltaY;\n      var newPositionX = panning.lockAxisX ? positionX : mouseX;\n      var newPositionY = panning.lockAxisY ? positionY : mouseY;\n      var _c = _this.setup.alignmentAnimation,\n        sizeX = _c.sizeX,\n        sizeY = _c.sizeY;\n      var paddingValueX = getPaddingValue(_this, sizeX);\n      var paddingValueY = getPaddingValue(_this, sizeY);\n      if (newPositionX === positionX && newPositionY === positionY) return;\n      handleNewPosition(_this, newPositionX, newPositionY, paddingValueX, paddingValueY);\n    };\n    this.onPanningStart = function (event) {\n      var disabled = _this.setup.disabled;\n      var onPanningStart = _this.props.onPanningStart;\n      if (disabled) return;\n      var isAllowed = isPanningStartAllowed(_this, event);\n      if (!isAllowed) return;\n      var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n      if (!keysPressed) return;\n      if (event.button === 0 && !_this.setup.panning.allowLeftClickPan) return;\n      if (event.button === 1 && !_this.setup.panning.allowMiddleClickPan) return;\n      if (event.button === 2 && !_this.setup.panning.allowRightClickPan) return;\n      event.preventDefault();\n      event.stopPropagation();\n      handleCancelAnimation(_this);\n      handlePanningStart(_this, event);\n      handleCallback(getContext(_this), event, onPanningStart);\n    };\n    this.onPanning = function (event) {\n      var disabled = _this.setup.disabled;\n      var onPanning = _this.props.onPanning;\n      if (disabled) return;\n      var isAllowed = isPanningAllowed(_this);\n      if (!isAllowed) return;\n      var keysPressed = _this.isPressingKeys(_this.setup.panning.activationKeys);\n      if (!keysPressed) return;\n      event.preventDefault();\n      event.stopPropagation();\n      handlePanning(_this, event.clientX, event.clientY);\n      handleCallback(getContext(_this), event, onPanning);\n    };\n    this.onPanningStop = function (event) {\n      var onPanningStop = _this.props.onPanningStop;\n      if (_this.isPanning) {\n        handlePanningEnd(_this);\n        handleCallback(getContext(_this), event, onPanningStop);\n      }\n    };\n    /// ///////\n    // Pinch\n    /// ///////\n    this.onPinchStart = function (event) {\n      var disabled = _this.setup.disabled;\n      var _a = _this.props,\n        onPinchingStart = _a.onPinchingStart,\n        onZoomStart = _a.onZoomStart;\n      if (disabled) return;\n      var isAllowed = isPinchStartAllowed(_this, event);\n      if (!isAllowed) return;\n      handlePinchStart(_this, event);\n      handleCancelAnimation(_this);\n      handleCallback(getContext(_this), event, onPinchingStart);\n      handleCallback(getContext(_this), event, onZoomStart);\n    };\n    this.onPinch = function (event) {\n      var disabled = _this.setup.disabled;\n      var _a = _this.props,\n        onPinching = _a.onPinching,\n        onZoom = _a.onZoom;\n      if (disabled) return;\n      var isAllowed = isPinchAllowed(_this);\n      if (!isAllowed) return;\n      event.preventDefault();\n      event.stopPropagation();\n      handlePinchZoom(_this, event);\n      handleCallback(getContext(_this), event, onPinching);\n      handleCallback(getContext(_this), event, onZoom);\n    };\n    this.onPinchStop = function (event) {\n      var _a = _this.props,\n        onPinchingStop = _a.onPinchingStop,\n        onZoomStop = _a.onZoomStop;\n      if (_this.pinchStartScale) {\n        handlePinchStop(_this);\n        handleCallback(getContext(_this), event, onPinchingStop);\n        handleCallback(getContext(_this), event, onZoomStop);\n      }\n    };\n    /// ///////\n    // Touch\n    /// ///////\n    this.onTouchPanningStart = function (event) {\n      var disabled = _this.setup.disabled;\n      var onPanningStart = _this.props.onPanningStart;\n      if (disabled) return;\n      var isAllowed = isPanningStartAllowed(_this, event);\n      if (!isAllowed) return;\n      var isDoubleTap = _this.lastTouch && +new Date() - _this.lastTouch < 200 && event.touches.length === 1;\n      if (!isDoubleTap) {\n        _this.lastTouch = +new Date();\n        handleCancelAnimation(_this);\n        var touches = event.touches;\n        var isPanningAction = touches.length === 1;\n        var isPinchAction = touches.length === 2;\n        if (isPanningAction) {\n          handleCancelAnimation(_this);\n          handlePanningStart(_this, event);\n          handleCallback(getContext(_this), event, onPanningStart);\n        }\n        if (isPinchAction) {\n          _this.onPinchStart(event);\n        }\n      }\n    };\n    this.onTouchPanning = function (event) {\n      var disabled = _this.setup.disabled;\n      var onPanning = _this.props.onPanning;\n      if (_this.isPanning && event.touches.length === 1) {\n        if (disabled) return;\n        var isAllowed = isPanningAllowed(_this);\n        if (!isAllowed) return;\n        event.preventDefault();\n        event.stopPropagation();\n        var touch = event.touches[0];\n        handlePanning(_this, touch.clientX, touch.clientY);\n        handleCallback(getContext(_this), event, onPanning);\n      } else if (event.touches.length > 1) {\n        _this.onPinch(event);\n      }\n    };\n    this.onTouchPanningStop = function (event) {\n      _this.onPanningStop(event);\n      _this.onPinchStop(event);\n    };\n    /// ///////\n    // Double Click\n    /// ///////\n    this.onDoubleClick = function (event) {\n      var disabled = _this.setup.disabled;\n      if (disabled) return;\n      var isAllowed = isDoubleClickAllowed(_this, event);\n      if (!isAllowed) return;\n      handleDoubleClick(_this, event);\n    };\n    /// ///////\n    // Helpers\n    /// ///////\n    this.clearPanning = function (event) {\n      if (_this.isPanning) {\n        _this.onPanningStop(event);\n      }\n    };\n    this.setKeyPressed = function (e) {\n      _this.pressedKeys[e.key] = true;\n    };\n    this.setKeyUnPressed = function (e) {\n      _this.pressedKeys[e.key] = false;\n    };\n    this.isPressingKeys = function (keys) {\n      if (!keys.length) {\n        return true;\n      }\n      return Boolean(keys.find(function (key) {\n        return _this.pressedKeys[key];\n      }));\n    };\n    this.setTransformState = function (scale, positionX, positionY) {\n      var onTransformed = _this.props.onTransformed;\n      if (!Number.isNaN(scale) && !Number.isNaN(positionX) && !Number.isNaN(positionY)) {\n        if (scale !== _this.transformState.scale) {\n          _this.transformState.previousScale = _this.transformState.scale;\n          _this.transformState.scale = scale;\n        }\n        _this.transformState.positionX = positionX;\n        _this.transformState.positionY = positionY;\n        _this.applyTransformation();\n        var ctx_1 = getContext(_this);\n        _this.onChangeCallbacks.forEach(function (callback) {\n          return callback(ctx_1);\n        });\n        handleCallback(ctx_1, {\n          scale: scale,\n          positionX: positionX,\n          positionY: positionY\n        }, onTransformed);\n      } else {\n        console.error(\"Detected NaN set state values\");\n      }\n    };\n    this.setCenter = function () {\n      if (_this.wrapperComponent && _this.contentComponent) {\n        var targetState = getCenterPosition(_this.transformState.scale, _this.wrapperComponent, _this.contentComponent);\n        _this.setTransformState(targetState.scale, targetState.positionX, targetState.positionY);\n      }\n    };\n    this.handleTransformStyles = function (x, y, scale) {\n      if (_this.props.customTransform) {\n        return _this.props.customTransform(x, y, scale);\n      }\n      return getTransformStyles(x, y, scale);\n    };\n    this.applyTransformation = function () {\n      if (!_this.mounted || !_this.contentComponent) return;\n      var _a = _this.transformState,\n        scale = _a.scale,\n        positionX = _a.positionX,\n        positionY = _a.positionY;\n      var transform = _this.handleTransformStyles(positionX, positionY, scale);\n      _this.contentComponent.style.transform = transform;\n    };\n    this.getContext = function () {\n      return getContext(_this);\n    };\n    /**\n     * Hooks\n     */\n    this.onChange = function (callback) {\n      if (!_this.onChangeCallbacks.has(callback)) {\n        _this.onChangeCallbacks.add(callback);\n      }\n      return function () {\n        _this.onChangeCallbacks.delete(callback);\n      };\n    };\n    this.onInit = function (callback) {\n      if (!_this.onInitCallbacks.has(callback)) {\n        _this.onInitCallbacks.add(callback);\n      }\n      return function () {\n        _this.onInitCallbacks.delete(callback);\n      };\n    };\n    /**\n     * Initialization\n     */\n    this.init = function (wrapperComponent, contentComponent) {\n      _this.cleanupWindowEvents();\n      _this.wrapperComponent = wrapperComponent;\n      _this.contentComponent = contentComponent;\n      handleCalculateBounds(_this, _this.transformState.scale);\n      _this.handleInitializeWrapperEvents(wrapperComponent);\n      _this.handleInitialize(wrapperComponent, contentComponent);\n      _this.initializeWindowEvents();\n      _this.isInitialized = true;\n      var ctx = getContext(_this);\n      handleCallback(ctx, undefined, _this.props.onInit);\n    };\n    this.props = props;\n    this.setup = createSetup(this.props);\n    this.transformState = createState(this.props);\n  }\n  return ZoomPanPinch;\n}();\nvar Context = React.createContext(null);\nvar getContent = function (children, ctx) {\n  if (typeof children === \"function\") {\n    return children(ctx);\n  }\n  return children;\n};\nvar TransformWrapper = React.forwardRef(function (props, ref) {\n  var instance = useRef(new ZoomPanPinch(props)).current;\n  var content = getContent(props.children, getControls(instance));\n  useImperativeHandle(ref, function () {\n    return getControls(instance);\n  }, [instance]);\n  useEffect(function () {\n    instance.update(props);\n  }, [instance, props]);\n  return React.createElement(Context.Provider, {\n    value: instance\n  }, content);\n});\nvar KeepScale = React.forwardRef(function (props, ref) {\n  var localRef = useRef(null);\n  var instance = useContext(Context);\n  useEffect(function () {\n    return instance.onChange(function (ctx) {\n      if (localRef.current) {\n        var positionX = 0;\n        var positionY = 0;\n        localRef.current.style.transform = instance.handleTransformStyles(positionX, positionY, 1 / ctx.instance.transformState.scale);\n      }\n    });\n  }, [instance]);\n  return React.createElement(\"div\", __assign({}, props, {\n    ref: mergeRefs([localRef, ref])\n  }));\n});\nvar initialElementRect = {\n  width: 0,\n  height: 0,\n  y: 0,\n  x: 0,\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0\n};\nvar useResize = function (ref, onResize, dependencies) {\n  var resizeObserverRef = useRef();\n  var rectRef = useRef(initialElementRect);\n  var didUnmount = useRef(false);\n  useLayoutEffect(function () {\n    var _a;\n    didUnmount.current = false;\n    if (!(\"ResizeObserver\" in window)) {\n      return;\n    }\n    if (ref) {\n      resizeObserverRef.current = new ResizeObserver(function (entries) {\n        var newSize = ref.getBoundingClientRect();\n        if (!Array.isArray(entries) || !entries.length || didUnmount.current || newSize.width === rectRef.current.width && newSize.height === rectRef.current.height) return;\n        onResize(newSize, ref);\n        rectRef.current = newSize;\n      });\n      (_a = resizeObserverRef.current) === null || _a === void 0 ? void 0 : _a.observe(ref);\n    }\n    return function () {\n      var _a;\n      didUnmount.current = true;\n      if (ref) {\n        (_a = resizeObserverRef.current) === null || _a === void 0 ? void 0 : _a.unobserve(ref);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, __spreadArray([onResize, ref], dependencies, true));\n};\nvar previewStyles = {\n  position: \"absolute\",\n  zIndex: 2,\n  top: \"0px\",\n  left: \"0px\",\n  boxSizing: \"border-box\",\n  border: \"3px solid red\",\n  transformOrigin: \"0% 0%\",\n  boxShadow: \"rgba(0,0,0,0.2) 0 0 0 10000000px\"\n};\nvar MiniMap = function (_a) {\n  var _b = _a.width,\n    width = _b === void 0 ? 200 : _b,\n    _c = _a.height,\n    height = _c === void 0 ? 200 : _c,\n    _d = _a.borderColor,\n    borderColor = _d === void 0 ? \"red\" : _d,\n    children = _a.children,\n    rest = __rest(_a, [\"width\", \"height\", \"borderColor\", \"children\"]);\n  var _e = useState(false),\n    initialized = _e[0],\n    setInitialized = _e[1];\n  var instance = useTransformContext();\n  var miniMapInstance = useRef(null);\n  var mainRef = useRef(null);\n  var wrapperRef = useRef(null);\n  var previewRef = useRef(null);\n  var getViewportSize = useCallback(function () {\n    if (instance.wrapperComponent) {\n      var rect = instance.wrapperComponent.getBoundingClientRect();\n      return {\n        width: rect.width,\n        height: rect.height\n      };\n    }\n    return {\n      width: 0,\n      height: 0\n    };\n  }, [instance.wrapperComponent]);\n  var getContentSize = useCallback(function () {\n    if (instance.contentComponent) {\n      var rect = instance.contentComponent.getBoundingClientRect();\n      return {\n        width: rect.width / instance.transformState.scale,\n        height: rect.height / instance.transformState.scale\n      };\n    }\n    return {\n      width: 0,\n      height: 0\n    };\n  }, [instance.contentComponent, instance.transformState.scale]);\n  var computeMiniMapScale = useCallback(function () {\n    var contentSize = getContentSize();\n    var scaleX = width / contentSize.width;\n    var scaleY = height / contentSize.height;\n    var scale = scaleY > scaleX ? scaleX : scaleY;\n    return scale;\n  }, [getContentSize, height, width]);\n  var computeMiniMapSize = function () {\n    var contentSize = getContentSize();\n    var scaleX = width / contentSize.width;\n    var scaleY = height / contentSize.height;\n    if (scaleY > scaleX) {\n      return {\n        width: width,\n        height: contentSize.height * scaleX\n      };\n    }\n    return {\n      width: contentSize.width * scaleY,\n      height: height\n    };\n  };\n  var computeMiniMapStyle = function () {\n    var scale = computeMiniMapScale();\n    var style = {\n      transform: \"scale(\".concat(scale || 1, \")\"),\n      transformOrigin: \"0% 0%\",\n      position: \"absolute\",\n      boxSizing: \"border-box\",\n      zIndex: 1,\n      overflow: \"hidden\"\n    };\n    Object.keys(style).forEach(function (key) {\n      if (wrapperRef.current) {\n        wrapperRef.current.style[key] = style[key];\n      }\n    });\n  };\n  var transformMiniMap = function () {\n    computeMiniMapStyle();\n    var miniSize = computeMiniMapSize();\n    var wrapSize = getContentSize();\n    if (wrapperRef.current) {\n      wrapperRef.current.style.width = \"\".concat(wrapSize.width, \"px\");\n      wrapperRef.current.style.height = \"\".concat(wrapSize.height, \"px\");\n    }\n    if (mainRef.current) {\n      mainRef.current.style.width = \"\".concat(miniSize.width, \"px\");\n      mainRef.current.style.height = \"\".concat(miniSize.height, \"px\");\n    }\n    if (previewRef.current) {\n      var size = getViewportSize();\n      var scale = computeMiniMapScale();\n      var previewScale = scale * (1 / instance.transformState.scale);\n      var transform = instance.handleTransformStyles(-instance.transformState.positionX * previewScale, -instance.transformState.positionY * previewScale, 1);\n      previewRef.current.style.transform = transform;\n      previewRef.current.style.width = \"\".concat(size.width * previewScale, \"px\");\n      previewRef.current.style.height = \"\".concat(size.height * previewScale, \"px\");\n    }\n  };\n  var initialize = function () {\n    transformMiniMap();\n  };\n  useTransformEffect(function () {\n    transformMiniMap();\n  });\n  useTransformInit(function () {\n    initialize();\n    setInitialized(true);\n  });\n  useResize(instance.contentComponent, initialize, [initialized]);\n  useEffect(function () {\n    return instance.onChange(function (zpp) {\n      var scale = computeMiniMapScale();\n      if (miniMapInstance.current) {\n        miniMapInstance.current.instance.transformState.scale = zpp.instance.transformState.scale;\n        miniMapInstance.current.instance.transformState.positionX = zpp.instance.transformState.positionX * scale;\n        miniMapInstance.current.instance.transformState.positionY = zpp.instance.transformState.positionY * scale;\n      }\n    });\n  }, [computeMiniMapScale, instance, miniMapInstance]);\n  var wrapperStyle = useMemo(function () {\n    return {\n      position: \"relative\",\n      zIndex: 2,\n      overflow: \"hidden\"\n    };\n  }, []);\n  return React.createElement(\"div\", __assign({}, rest, {\n    ref: mainRef,\n    style: wrapperStyle,\n    className: \"rzpp-mini-map \".concat(rest.className || \"\")\n  }), React.createElement(\"div\", __assign({}, rest, {\n    ref: wrapperRef,\n    className: \"rzpp-wrapper\"\n  }), children), React.createElement(\"div\", {\n    className: \"rzpp-preview\",\n    ref: previewRef,\n    style: __assign(__assign({}, previewStyles), {\n      borderColor: borderColor\n    })\n  }));\n};\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\nvar css_248z = \".transform-component-module_wrapper__SPB86 {\\n  position: relative;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n  transform: translate3d(0, 0, 0);\\n}\\n.transform-component-module_content__FBWxo {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.transform-component-module_content__FBWxo img {\\n  pointer-events: none;\\n}\\n\";\nvar styles = {\n  \"wrapper\": \"transform-component-module_wrapper__SPB86\",\n  \"content\": \"transform-component-module_content__FBWxo\"\n};\nstyleInject(css_248z);\nvar TransformComponent = function (_a) {\n  var children = _a.children,\n    _b = _a.wrapperClass,\n    wrapperClass = _b === void 0 ? \"\" : _b,\n    _c = _a.contentClass,\n    contentClass = _c === void 0 ? \"\" : _c,\n    wrapperStyle = _a.wrapperStyle,\n    contentStyle = _a.contentStyle,\n    _d = _a.wrapperProps,\n    wrapperProps = _d === void 0 ? {} : _d,\n    _e = _a.contentProps,\n    contentProps = _e === void 0 ? {} : _e;\n  var _f = useContext(Context),\n    init = _f.init,\n    cleanupWindowEvents = _f.cleanupWindowEvents;\n  var wrapperRef = useRef(null);\n  var contentRef = useRef(null);\n  useEffect(function () {\n    var wrapper = wrapperRef.current;\n    var content = contentRef.current;\n    if (wrapper !== null && content !== null && init) {\n      init === null || init === void 0 ? void 0 : init(wrapper, content);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return function () {\n      cleanupWindowEvents === null || cleanupWindowEvents === void 0 ? void 0 : cleanupWindowEvents();\n    };\n  }, []);\n  return React.createElement(\"div\", __assign({}, wrapperProps, {\n    ref: wrapperRef,\n    className: \"\".concat(baseClasses.wrapperClass, \" \").concat(styles.wrapper, \" \").concat(wrapperClass),\n    style: wrapperStyle\n  }), React.createElement(\"div\", __assign({}, contentProps, {\n    ref: contentRef,\n    className: \"\".concat(baseClasses.contentClass, \" \").concat(styles.content, \" \").concat(contentClass),\n    style: contentStyle\n  }), children));\n};\nvar useTransformContext = function () {\n  var libraryContext = useContext(Context);\n  if (!libraryContext) {\n    throw new Error(\"Transform context must be placed inside TransformWrapper\");\n  }\n  return libraryContext;\n};\nvar useControls = function () {\n  var libraryContext = useTransformContext();\n  return getControls(libraryContext);\n};\nvar useTransformInit = function (callback) {\n  var libraryContext = useTransformContext();\n  useEffect(function () {\n    var unmountCallback;\n    var unmount;\n    if (libraryContext.contentComponent && libraryContext.wrapperComponent) {\n      unmountCallback = callback(getState(libraryContext));\n    } else {\n      unmount = libraryContext.onInit(function (ref) {\n        unmountCallback = callback(getState(ref.instance));\n      });\n    }\n    return function () {\n      unmount === null || unmount === void 0 ? void 0 : unmount();\n      unmountCallback === null || unmountCallback === void 0 ? void 0 : unmountCallback();\n    };\n  }, []);\n};\nvar useTransformEffect = function (callback) {\n  var libraryContext = useTransformContext();\n  useEffect(function () {\n    var unmountCallback;\n    var unmount = libraryContext.onChange(function (ref) {\n      unmountCallback = callback(getState(ref.instance));\n    });\n    return function () {\n      unmount();\n      unmountCallback === null || unmountCallback === void 0 ? void 0 : unmountCallback();\n    };\n  }, [callback, libraryContext]);\n};\nfunction useTransformComponent(callback) {\n  var libraryContext = useTransformContext();\n  var _a = useState(callback(getState(libraryContext))),\n    transformRender = _a[0],\n    setTransformRender = _a[1];\n  useEffect(function () {\n    var mounted = true;\n    var unmount = libraryContext.onChange(function (ref) {\n      if (mounted) {\n        setTransformRender(callback(getState(ref.instance)));\n      }\n    });\n    return function () {\n      unmount();\n      mounted = false;\n    };\n  }, [callback, libraryContext]);\n  return transformRender;\n}\nexport { Context, KeepScale, MiniMap, TransformComponent, TransformWrapper, getCenterPosition, getMatrixTransformStyles, getTransformStyles, useControls, useTransformComponent, useTransformContext, useTransformEffect, useTransformInit };","map":{"version":3,"names":["roundNumber","num","decimal","Number","toFixed","checkIsNumber","defaultValue","handleCallback","context","event","callback","easeOut","t","Math","cos","PI","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animations","handleCancelAnimationFrame","animation","cancelAnimationFrame","handleCancelAnimation","contextInstance","mounted","animate","velocity","handleSetupAnimation","animationName","animationTime","startTime","Date","getTime","lastStep","frameTime","animationProgress","animationType","step","requestAnimationFrame","isValidTargetState","targetState","scale","positionX","positionY","isNaN","isValid","setTransformState","_a","transformState","scaleDiff","positionXDiff","positionYDiff","newScale","newPositionX","newPositionY","getComponentsSizes","wrapperComponent","contentComponent","wrapperWidth","offsetWidth","wrapperHeight","offsetHeight","contentWidth","contentHeight","newContentWidth","newContentHeight","newDiffWidth","newDiffHeight","getBounds","diffWidth","diffHeight","centerZoomedOut","scaleWidthFactor","scaleHeightFactor","minPositionX","maxPositionX","minPositionY","maxPositionY","calculateBounds","setup","Error","bounds","Boolean","boundLimiter","value","minBound","maxBound","isActive","handleCalculateBounds","getMouseBoundedPosition","limitToBounds","paddingValueX","paddingValueY","paddingX","paddingY","x","y","handleCalculateZoomPositions","mouseX","mouseY","scaleDifference","console","error","calculatedPositionX","calculatedPositionY","newPositions","checkZoomBounds","zoom","minScale","maxScale","zoomPadding","enablePadding","scalePadding","minScaleWithPadding","isPanningStartAllowed","excluded","panning","isInitialized","target","targetIsShadowDom","isWrapperChild","composedPath","some","el","Element","contains","isAllowed","isExcluded","isExcludedNode","isPanningAllowed","isPanning","disabled","handlePanningSetup","clientX","clientY","startCoords","handleTouchPanningSetup","touches","oneFingerTouch","length","handlePanToBounds","_b","_c","xChanged","yChanged","mousePosX","mousePosY","_d","handleNewPosition","getPanningClientPosition","lockAxisX","lockAxisY","getPaddingValue","size","disablePadding","isVelocityCalculationAllowed","velocityAnimation","disabledVelocity","isVelocityAllowed","getVelocityMoveTime","equalToMove","sensitivity","getVelocityPosition","newPosition","startPosition","currentPosition","isLocked","minPosition","maxPosition","minTarget","maxTarget","calculatedPosition","getSizeMultiplier","defaultMultiplier","min","window","innerWidth","handleCalculateVelocity","position","lastMousePosition","velocityTime","now","sizeMultiplier","distanceX","distanceY","velocityX","velocityY","interval","speed","sqrt","total","handleVelocityPanning","alignmentAnimation","zoomAnimation","sizeX","sizeY","velocityAlignmentTime","alignAnimationTime","moveAnimationTime","finalAnimationTime","max","maxTargetX","minTargetX","maxTargetY","minTargetY","startState","alignAnimation","alignStep","customStep","currentPositionX","currentPositionY","handlePanningStart","TouchEvent","undefined","handleAlignToBounds","customAnimationTime","isDisabled","handlePanning","handlePanningEnd","velocityDisabled","wrapperRect","getBoundingClientRect","contentRect","width","height","isZoomed","shouldAnimate","handleZoomToPoint","handleAlignToScaleBounds","mousePositionX","mousePositionY","__assign","Object","assign","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","SuppressedError","suppressed","message","name","initialState","previousScale","initialSetup","centerOnInit","smooth","wheel","smoothStep","wheelDisabled","touchPadDisabled","activationKeys","allowLeftClickPan","allowMiddleClickPan","allowRightClickPan","wheelPanning","pinch","doubleClick","mode","baseClasses","wrapperClass","contentClass","createState","props","initialScale","initialPositionX","initialPositionY","createSetup","newSetup","keys","forEach","key","validValue","validParameter","dataType","toString","isObject","isArray","handleCalculateButtonZoom","delta","targetScale","exp","handleZoomToViewCenter","resetTransformations","onResetTransformation","initialTransformation","newBounds","boundedPositions","newState","getOffset","element","wrapper","content","state","offset","wrapperOffset","contentOffset","xOff","yOff","calculateZoomToNode","node","customZoom","nodeRect","nodeOffset","nodeLeft","nodeTop","nodeWidth","nodeHeight","scaleX","scaleY","offsetX","offsetY","left","top","zoomIn","zoomOut","setTransform","resetTransform","centerView","getCenterPosition","zoomToElement","document","getElementById","getControls","instance","getState","getContext","ref","passiveSupported","makePassiveEventOption","options","passive","err","matchPrefix","exclude","matches","cancelTimeout","timeout","clearTimeout","getTransformStyles","getMatrixTransformStyles","a","b","c","d","tx","ty","centerPositionX","centerPositionY","mergeRefs","refs","current","isWheelAllowed","ctrlKey","getDeltaY","deltaY","getDelta","customDelta","getMousePosition","touch","handleCalculateWheelZoom","disable","getTarget","paddingEnabled","handleWheelZoomStop","previousWheelEvent","sign","isPinchStartAllowed","isPinchAllowed","pinchStartDistance","calculateTouchMidPoint","firstPointX","firstPointY","secondPointX","secondPointY","getTouchDistance","pow","pageX","pageY","calculatePinchZoom","currentDistance","pinchStartScale","touchProportion","wheelStopEventTime","wheelAnimationTime","handleWheelStart","onWheelStart","onZoomStart","wheelStopEventTimer","handleWheelZoom","onWheel","onZoom","preventDefault","stopPropagation","zoomStep","abs","mousePosition","isPaddingDisabled","isLimitedToBounds","handleWheelStop","onWheelStop","onZoomStop","wheelAnimationTimer","setTimeout","hasStoppedZooming","getTouchCenter","totalX","totalY","handlePinchStart","distance","lastDistance","center","pinchLastCenterX","pinchLastCenterY","handlePinchZoom","midPoint","isFinite","panX","panY","pinchMidpoint","finalX","finalY","handlePinchStop","handleDoubleClickStop","doubleClickStopEventTimer","handleDoubleClickResetMode","getDoubleClickScale","handleDoubleClick","isDoubleClickAllowed","ZoomPanPinch","_this","onChangeCallbacks","Set","onInitCallbacks","isWheelPanning","lastTouch","maxBounds","pressedKeys","mount","initializeWindowEvents","unmount","cleanupWindowEvents","update","newProps","currentDocument","ownerDocument","currentWindow","defaultView","addEventListener","onWheelPanning","onPanningStart","onPanning","onPanningStop","clearPanning","setKeyUnPressed","setKeyPressed","removeEventListener","observer","disconnect","handleInitializeWrapperEvents","onWheelZoom","onDoubleClick","onTouchPanningStart","onTouchPanning","onTouchPanningStop","handleInitialize","isCentered","hasTarget","entries","_i","entries_1","entry","applyTransformation","ResizeObserver","currentWidth","currentHeight","setCenter","observe","keysPressed","isPressingKeys","deltaX","button","onPinchStart","onPinchingStart","onPinch","onPinching","onPinchStop","onPinchingStop","isDoubleTap","isPanningAction","isPinchAction","find","onTransformed","ctx_1","handleTransformStyles","customTransform","transform","style","onChange","has","add","delete","onInit","init","ctx","Context","React","createContext","getContent","children","TransformWrapper","forwardRef","useRef","useImperativeHandle","useEffect","createElement","Provider","KeepScale","localRef","useContext","initialElementRect","bottom","right","useResize","onResize","dependencies","resizeObserverRef","rectRef","didUnmount","useLayoutEffect","newSize","unobserve","previewStyles","zIndex","boxSizing","border","transformOrigin","boxShadow","MiniMap","borderColor","rest","_e","useState","initialized","setInitialized","useTransformContext","miniMapInstance","mainRef","wrapperRef","previewRef","getViewportSize","useCallback","rect","getContentSize","computeMiniMapScale","contentSize","computeMiniMapSize","computeMiniMapStyle","overflow","transformMiniMap","miniSize","wrapSize","previewScale","initialize","useTransformEffect","useTransformInit","zpp","wrapperStyle","useMemo","className","styleInject","css","insertAt","head","getElementsByTagName","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TransformComponent","contentStyle","wrapperProps","contentProps","_f","contentRef","styles","libraryContext","useControls","unmountCallback","useTransformComponent","transformRender","setTransformRender"],"sources":["../../src/utils/calculations.utils.ts","../../src/utils/callback.utils.ts","../../src/core/animations/animations.constants.ts","../../src/core/animations/animations.utils.ts","../../src/core/bounds/bounds.utils.ts","../../src/core/zoom/zoom.utils.ts","../../src/core/pan/panning.utils.ts","../../src/core/pan/velocity.utils.ts","../../src/core/pan/velocity.logic.ts","../../src/core/pan/panning.logic.ts","../../src/core/zoom/zoom.logic.ts","D:\\GitHub\\mri-web-app\\frontend\\node_modules\\react-zoom-pan-pinch\\node_modules\\tslib\\tslib.es6.js","../../src/constants/state.constants.ts","../../src/utils/state.utils.ts","../../src/core/handlers/handlers.utils.ts","../../src/core/handlers/handlers.logic.ts","../../src/utils/context.utils.ts","../../src/utils/event.utils.ts","../../src/utils/helpers.utils.ts","../../src/utils/styles.utils.ts","../../src/utils/ref.utils.ts","../../src/core/wheel/wheel.utils.ts","../../src/core/pinch/pinch.utils.ts","../../src/core/wheel/wheel.logic.ts","../../src/core/pinch/pinch.logic.ts","../../src/core/double-click/double-click.logic.ts","../../src/core/instance.core.ts","../../src/components/transform-wrapper/transform-wrapper.tsx","../../src/components/keep-scale/keep-scale.tsx","../../src/components/mini-map/use-resize.hook.ts","../../src/components/mini-map/mini-map.tsx","D:\\GitHub\\mri-web-app\\frontend\\node_modules\\react-zoom-pan-pinch\\node_modules\\style-inject\\dist\\style-inject.es.js","../../src/components/transform-component/transform-component.tsx","../../src/hooks/use-transform-context.tsx","../../src/hooks/use-controls.tsx","../../src/hooks/use-transform-init.tsx","../../src/hooks/use-transform-effect.tsx","../../src/hooks/use-transform-component.tsx"],"sourcesContent":["","","","","","","","","","","","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","","","","","","","","","","","","","","","","","","","","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","","","","","",""],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}