{"ast":null,"code":"var _jsxFileName = \"D:\\\\GitHub\\\\mri-web-app\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// 导入 React 库中的 useState 和 useReducer 钩子，用于在函数组件中添加状态管理\nimport React, { useState, useReducer, useRef, useEffect } from 'react';\n// 导入 axios 库，用于发送 HTTP 请求\nimport axios from 'axios';\n// 新增：导入 react-router-dom 中的 BrowserRouter 重命名为 Router，Routes 和 Route 组件\nimport { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';\nimport DICOMViewer from './components/Viewer/DICOMViewer';\n// 导入 ImageViewer 和 ComparisonView 组件\nimport ImageViewer from './components/Viewer/ImageViewer';\nimport ComparisonView from './components/Viewer/ComparisonView';\nimport DataManager from './components/DataManagement/DataManager';\nimport './styles/dicom.css';\nimport './styles/App.css';\n// 新增环境变量配置\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n\n// 使用useReducer整合状态\nconst initialState = {\n  taskId: null,\n  status: 'idle',\n  // 'idle' | 'uploading' | 'processing' | 'completed' | 'failed'\n  progress: 0,\n  result: null,\n  error: null\n};\nfunction uploadReducer(state, action) {\n  switch (action.type) {\n    case 'START_UPLOAD':\n      return {\n        ...state,\n        status: 'uploading',\n        progress: 0\n      };\n    case 'UPDATE_PROGRESS':\n      return {\n        ...state,\n        progress: action.payload\n      };\n    case 'PROCESS_START':\n      return {\n        ...state,\n        status: 'processing',\n        taskId: action.payload\n      };\n    case 'SUCCESS':\n      return {\n        ...state,\n        status: 'completed',\n        result: action.payload\n      };\n    case 'ERROR':\n      return {\n        ...state,\n        status: 'failed',\n        error: action.payload\n      };\n    case 'RESET':\n      return initialState;\n    default:\n      return state;\n  }\n}\n\n// 定义一个名为 App 的函数组件，这是整个应用的根组件\nfunction App() {\n  _s();\n  // 使用 useState 钩子创建状态变量 selectedFile，用于存储用户选择的文件\n  const [selectedFile, setSelectedFile] = useState(null);\n  // 使用 useReducer 管理上传状态\n  const [state, dispatch] = useReducer(uploadReducer, initialState);\n  // 使用 useRef 创建取消令牌\n  const cancelTokenSource = useRef(null);\n  const [previewImage, setPreviewImage] = useState(null);\n  const [processingProgress, setProcessingProgress] = useState(0);\n  const pollInterval = useRef(null); // 添加轮询间隔引用\n\n  // 清理函数\n  const cleanup = () => {\n    if (pollInterval.current) {\n      clearTimeout(pollInterval.current);\n    }\n    if (cancelTokenSource.current) {\n      cancelTokenSource.current.cancel('操作已取消');\n    }\n  };\n\n  // 组件卸载时清理\n  useEffect(() => {\n    return cleanup;\n  }, []);\n\n  // 定义一个处理文件选择事件的函数\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n      // 清除之前的状态\n      setPreviewImage(null);\n      setProcessingProgress(0);\n      dispatch({\n        type: 'RESET'\n      });\n    }\n  };\n\n  // 添加可恢复上传功能\n  const handleUpload = async () => {\n    if (!selectedFile) return;\n\n    // 清理之前的状态\n    cleanup();\n    cancelTokenSource.current = axios.CancelToken.source();\n    const formData = new FormData();\n    formData.append('file', selectedFile);\n    formData.append('patient_name', '测试患者');\n    formData.append('patient_id', 'test-' + Date.now());\n    try {\n      dispatch({\n        type: 'START_UPLOAD'\n      });\n      console.log('开始上传文件:', selectedFile.name);\n      const response = await axios.post(`${API_BASE}/api/process`, formData, {\n        cancelToken: cancelTokenSource.current.token,\n        onUploadProgress: e => {\n          const progress = Math.round(e.loaded * 100 / e.total);\n          dispatch({\n            type: 'UPDATE_PROGRESS',\n            payload: progress\n          });\n        }\n      });\n      console.log('上传响应:', response.data);\n      if (response.data.task_id) {\n        dispatch({\n          type: 'PROCESS_START',\n          payload: response.data.task_id\n        });\n\n        // 获取图像预览\n        try {\n          const previewResponse = await axios.get(`${API_BASE}/api/preview/${selectedFile.name}`);\n          if (previewResponse.data.status === 'success') {\n            setPreviewImage(`data:image/png;base64,${previewResponse.data.image}`);\n          }\n        } catch (error) {\n          console.error('获取预览失败:', error);\n        }\n\n        // 开始轮询进度\n        const pollProgress = async () => {\n          try {\n            // 获取处理进度\n            const progressResponse = await axios.get(`${API_BASE}/api/tasks/${response.data.task_id}/progress`);\n            console.log('进度响应:', progressResponse.data);\n            if (progressResponse.data.status === 'success') {\n              setProcessingProgress(progressResponse.data.progress);\n\n              // 检查任务状态\n              const statusResponse = await axios.get(`${API_BASE}/api/tasks/${response.data.task_id}`);\n              console.log('状态响应:', statusResponse.data);\n              if (statusResponse.data.status === 'completed') {\n                dispatch({\n                  type: 'SUCCESS',\n                  payload: statusResponse.data.results\n                });\n                cleanup(); // 停止轮询\n              } else if (statusResponse.data.status === 'failed') {\n                throw new Error(statusResponse.data.error || '处理失败');\n              } else {\n                // 继续轮询\n                pollInterval.current = setTimeout(pollProgress, 2000);\n              }\n            }\n          } catch (error) {\n            console.error('轮询错误:', error);\n            dispatch({\n              type: 'ERROR',\n              payload: error.message\n            });\n            cleanup(); // 停止轮询\n          }\n        };\n\n        // 开始首次轮询\n        pollProgress();\n      }\n    } catch (error) {\n      console.error('上传错误:', error);\n      if (error.response) {\n        console.error('错误响应:', error.response.data);\n        dispatch({\n          type: 'ERROR',\n          payload: error.response.data.error || '上传失败'\n        });\n      } else if (error.request) {\n        console.error('未收到响应:', error.request);\n        dispatch({\n          type: 'ERROR',\n          payload: '服务器无响应'\n        });\n      } else {\n        console.error('请求错误:', error.message);\n        dispatch({\n          type: 'ERROR',\n          payload: error.message\n        });\n      }\n      cleanup(); // 出错时清理\n    }\n  };\n\n  // 返回 JSX 元素，用于渲染组件的 UI\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"main-nav\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"\\u9996\\u9875\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/upload\",\n          children: \"\\u4E0A\\u4F20\\u56FE\\u50CF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/compare\",\n          children: \"\\u56FE\\u50CF\\u5BF9\\u6BD4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/data\",\n          children: \"\\u6570\\u636E\\u7BA1\\u7406\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"main-content\",\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"home-page\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"MRI\\u56FE\\u50CF\\u5904\\u7406\\u7CFB\\u7EDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6B22\\u8FCE\\u4F7F\\u7528MRI\\u56FE\\u50CF\\u5904\\u7406\\u7CFB\\u7EDF\\uFF0C\\u8BF7\\u9009\\u62E9\\u4EE5\\u4E0B\\u529F\\u80FD\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"feature-grid\",\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/upload\",\n                  className: \"feature-card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\u4E0A\\u4F20\\u56FE\\u50CF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"\\u4E0A\\u4F20\\u5E76\\u5904\\u7406MRI\\u56FE\\u50CF\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/compare\",\n                  className: \"feature-card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\u56FE\\u50CF\\u5BF9\\u6BD4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"\\u5BF9\\u6BD4\\u539F\\u59CB\\u56FE\\u50CF\\u548C\\u5904\\u7406\\u7ED3\\u679C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/data\",\n                  className: \"feature-card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"\\u6570\\u636E\\u7BA1\\u7406\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"\\u7BA1\\u7406\\u60A3\\u8005\\u6570\\u636E\\u548C\\u62A5\\u544A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/upload\",\n            element: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-page\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u4E0A\\u4F20MRI\\u56FE\\u50CF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"upload-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  onChange: handleFileChange,\n                  accept: \".dcm,.nii,.nii.gz\",\n                  disabled: state.status === 'uploading' || state.status === 'processing'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleUpload,\n                  disabled: !selectedFile || state.status === 'uploading' || state.status === 'processing',\n                  children: state.status === 'uploading' ? '上传中...' : state.status === 'processing' ? '处理中...' : '上传'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 33\n              }, this), state.status === 'uploading' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress\",\n                    style: {\n                      width: `${state.progress}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-text\",\n                  children: [\"\\u4E0A\\u4F20\\u8FDB\\u5EA6: \", state.progress, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 37\n              }, this), state.status === 'processing' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress\",\n                    style: {\n                      width: `${processingProgress}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-text\",\n                  children: [\"\\u5904\\u7406\\u8FDB\\u5EA6: \", processingProgress, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 37\n              }, this), previewImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"preview-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"\\u56FE\\u50CF\\u9884\\u89C8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: previewImage,\n                  alt: \"DICOM\\u9884\\u89C8\",\n                  className: \"preview-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 37\n              }, this), state.error && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"error-message\",\n                children: state.error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 37\n              }, this), state.status === 'completed' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"success-message\",\n                children: \"\\u5904\\u7406\\u5B8C\\u6210\\uFF01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/compare\",\n            element: /*#__PURE__*/_jsxDEV(ComparisonView, {\n              originalImage: selectedFile ? URL.createObjectURL(selectedFile) : null,\n              processedImage: state.result ? `${API_BASE}/uploads/${state.result}` : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/data\",\n            element: /*#__PURE__*/_jsxDEV(DataManager, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 54\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 9\n  }, this);\n}\n\n// 导出 App 组件，以便在其他文件中使用\n_s(App, \"p+azLtG0nclg+OUt5sD81ByoLKA=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useReducer","useRef","useEffect","axios","BrowserRouter","Router","Routes","Route","Link","DICOMViewer","ImageViewer","ComparisonView","DataManager","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","initialState","taskId","status","progress","result","error","uploadReducer","state","action","type","payload","App","_s","selectedFile","setSelectedFile","dispatch","cancelTokenSource","previewImage","setPreviewImage","processingProgress","setProcessingProgress","pollInterval","cleanup","current","clearTimeout","cancel","handleFileChange","e","file","target","files","handleUpload","CancelToken","source","formData","FormData","append","Date","now","console","log","name","response","post","cancelToken","token","onUploadProgress","Math","round","loaded","total","data","task_id","previewResponse","get","image","pollProgress","progressResponse","statusResponse","results","Error","setTimeout","message","request","children","className","to","fileName","_jsxFileName","lineNumber","columnNumber","path","element","onChange","accept","disabled","onClick","style","width","src","alt","originalImage","URL","createObjectURL","processedImage","_c","$RefreshReg$"],"sources":["D:/GitHub/mri-web-app/frontend/src/App.js"],"sourcesContent":["// 导入 React 库中的 useState 和 useReducer 钩子，用于在函数组件中添加状态管理\r\nimport React, { useState, useReducer, useRef, useEffect } from 'react';\r\n// 导入 axios 库，用于发送 HTTP 请求\r\nimport axios from 'axios';\r\n// 新增：导入 react-router-dom 中的 BrowserRouter 重命名为 Router，Routes 和 Route 组件\r\nimport { BrowserRouter as Router, Routes, Route, Link } from 'react-router-dom';\r\nimport DICOMViewer from './components/Viewer/DICOMViewer';\r\n// 导入 ImageViewer 和 ComparisonView 组件\r\nimport ImageViewer from './components/Viewer/ImageViewer';\r\nimport ComparisonView from './components/Viewer/ComparisonView';\r\nimport DataManager from './components/DataManagement/DataManager';\r\nimport './styles/dicom.css';\r\nimport './styles/App.css';\r\n// 新增环境变量配置\r\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n\r\n// 使用useReducer整合状态\r\nconst initialState = {\r\n    taskId: null,\r\n    status: 'idle', // 'idle' | 'uploading' | 'processing' | 'completed' | 'failed'\r\n    progress: 0,\r\n    result: null,\r\n    error: null\r\n};\r\n\r\nfunction uploadReducer(state, action) {\r\n    switch (action.type) {\r\n        case 'START_UPLOAD':\r\n            return { ...state, status: 'uploading', progress: 0 };\r\n        case 'UPDATE_PROGRESS':\r\n            return { ...state, progress: action.payload };\r\n        case 'PROCESS_START':\r\n            return { ...state, status: 'processing', taskId: action.payload };\r\n        case 'SUCCESS':\r\n            return { ...state, status: 'completed', result: action.payload };\r\n        case 'ERROR':\r\n            return { ...state, status: 'failed', error: action.payload };\r\n        case 'RESET':\r\n            return initialState;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// 定义一个名为 App 的函数组件，这是整个应用的根组件\r\nfunction App() {\r\n    // 使用 useState 钩子创建状态变量 selectedFile，用于存储用户选择的文件\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    // 使用 useReducer 管理上传状态\r\n    const [state, dispatch] = useReducer(uploadReducer, initialState);\r\n    // 使用 useRef 创建取消令牌\r\n    const cancelTokenSource = useRef(null);\r\n    const [previewImage, setPreviewImage] = useState(null);\r\n    const [processingProgress, setProcessingProgress] = useState(0);\r\n    const pollInterval = useRef(null);  // 添加轮询间隔引用\r\n\r\n    // 清理函数\r\n    const cleanup = () => {\r\n        if (pollInterval.current) {\r\n            clearTimeout(pollInterval.current);\r\n        }\r\n        if (cancelTokenSource.current) {\r\n            cancelTokenSource.current.cancel('操作已取消');\r\n        }\r\n    };\r\n\r\n    // 组件卸载时清理\r\n    useEffect(() => {\r\n        return cleanup;\r\n    }, []);\r\n\r\n    // 定义一个处理文件选择事件的函数\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setSelectedFile(file);\r\n            // 清除之前的状态\r\n            setPreviewImage(null);\r\n            setProcessingProgress(0);\r\n            dispatch({ type: 'RESET' });\r\n        }\r\n    };\r\n\r\n    // 添加可恢复上传功能\r\n    const handleUpload = async () => {\r\n        if (!selectedFile) return;\r\n\r\n        // 清理之前的状态\r\n        cleanup();\r\n        cancelTokenSource.current = axios.CancelToken.source();\r\n\r\n        const formData = new FormData();\r\n        formData.append('file', selectedFile);\r\n        formData.append('patient_name', '测试患者');\r\n        formData.append('patient_id', 'test-' + Date.now());\r\n        \r\n        try {\r\n            dispatch({ type: 'START_UPLOAD' });\r\n            \r\n            console.log('开始上传文件:', selectedFile.name);\r\n            const response = await axios.post(`${API_BASE}/api/process`, formData, {\r\n                cancelToken: cancelTokenSource.current.token,\r\n                onUploadProgress: (e) => {\r\n                    const progress = Math.round((e.loaded * 100) / e.total);\r\n                    dispatch({ type: 'UPDATE_PROGRESS', payload: progress });\r\n                }\r\n            });\r\n\r\n            console.log('上传响应:', response.data);\r\n            \r\n            if (response.data.task_id) {\r\n                dispatch({ type: 'PROCESS_START', payload: response.data.task_id });\r\n                \r\n                // 获取图像预览\r\n                try {\r\n                    const previewResponse = await axios.get(`${API_BASE}/api/preview/${selectedFile.name}`);\r\n                    if (previewResponse.data.status === 'success') {\r\n                        setPreviewImage(`data:image/png;base64,${previewResponse.data.image}`);\r\n                    }\r\n                } catch (error) {\r\n                    console.error('获取预览失败:', error);\r\n                }\r\n\r\n                // 开始轮询进度\r\n                const pollProgress = async () => {\r\n                    try {\r\n                        // 获取处理进度\r\n                        const progressResponse = await axios.get(`${API_BASE}/api/tasks/${response.data.task_id}/progress`);\r\n                        console.log('进度响应:', progressResponse.data);\r\n                        \r\n                        if (progressResponse.data.status === 'success') {\r\n                            setProcessingProgress(progressResponse.data.progress);\r\n                            \r\n                            // 检查任务状态\r\n                            const statusResponse = await axios.get(`${API_BASE}/api/tasks/${response.data.task_id}`);\r\n                            console.log('状态响应:', statusResponse.data);\r\n                            \r\n                            if (statusResponse.data.status === 'completed') {\r\n                                dispatch({ type: 'SUCCESS', payload: statusResponse.data.results });\r\n                                cleanup();  // 停止轮询\r\n                            } else if (statusResponse.data.status === 'failed') {\r\n                                throw new Error(statusResponse.data.error || '处理失败');\r\n                            } else {\r\n                                // 继续轮询\r\n                                pollInterval.current = setTimeout(pollProgress, 2000);\r\n                            }\r\n                        }\r\n                    } catch (error) {\r\n                        console.error('轮询错误:', error);\r\n                        dispatch({ type: 'ERROR', payload: error.message });\r\n                        cleanup();  // 停止轮询\r\n                    }\r\n                };\r\n\r\n                // 开始首次轮询\r\n                pollProgress();\r\n            }\r\n        } catch (error) {\r\n            console.error('上传错误:', error);\r\n            if (error.response) {\r\n                console.error('错误响应:', error.response.data);\r\n                dispatch({ type: 'ERROR', payload: error.response.data.error || '上传失败' });\r\n            } else if (error.request) {\r\n                console.error('未收到响应:', error.request);\r\n                dispatch({ type: 'ERROR', payload: '服务器无响应' });\r\n            } else {\r\n                console.error('请求错误:', error.message);\r\n                dispatch({ type: 'ERROR', payload: error.message });\r\n            }\r\n            cleanup();  // 出错时清理\r\n        }\r\n    };\r\n\r\n    // 返回 JSX 元素，用于渲染组件的 UI\r\n    return (\r\n        <Router>\r\n            <div className=\"app-container\">\r\n                <nav className=\"main-nav\">\r\n                    <Link to=\"/\">首页</Link>\r\n                    <Link to=\"/upload\">上传图像</Link>\r\n                    <Link to=\"/compare\">图像对比</Link>\r\n                    <Link to=\"/data\">数据管理</Link>\r\n                </nav>\r\n\r\n                <main className=\"main-content\">\r\n                    <Routes>\r\n                        <Route path=\"/\" element={\r\n                            <div className=\"home-page\">\r\n                                <h1>MRI图像处理系统</h1>\r\n                                <p>欢迎使用MRI图像处理系统，请选择以下功能：</p>\r\n                                <div className=\"feature-grid\">\r\n                                    <Link to=\"/upload\" className=\"feature-card\">\r\n                                        <h3>上传图像</h3>\r\n                                        <p>上传并处理MRI图像</p>\r\n                                    </Link>\r\n                                    <Link to=\"/compare\" className=\"feature-card\">\r\n                                        <h3>图像对比</h3>\r\n                                        <p>对比原始图像和处理结果</p>\r\n                                    </Link>\r\n                                    <Link to=\"/data\" className=\"feature-card\">\r\n                                        <h3>数据管理</h3>\r\n                                        <p>管理患者数据和报告</p>\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        } />\r\n                        \r\n                        <Route path=\"/upload\" element={\r\n                            <div className=\"upload-page\">\r\n                                <h2>上传MRI图像</h2>\r\n                                <div className=\"upload-section\">\r\n                                    <input \r\n                                        type=\"file\" \r\n                                        onChange={handleFileChange} \r\n                                        accept=\".dcm,.nii,.nii.gz\"\r\n                                        disabled={state.status === 'uploading' || state.status === 'processing'} \r\n                                    />\r\n                                    <button \r\n                                        onClick={handleUpload} \r\n                                        disabled={!selectedFile || state.status === 'uploading' || state.status === 'processing'}\r\n                                    >\r\n                                        {state.status === 'uploading' ? '上传中...' : \r\n                                         state.status === 'processing' ? '处理中...' : '上传'}\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {state.status === 'uploading' && (\r\n                                    <div className=\"progress-section\">\r\n                                        <div className=\"progress-bar\">\r\n                                            <div className=\"progress\" style={{ width: `${state.progress}%` }}></div>\r\n                                        </div>\r\n                                        <div className=\"progress-text\">上传进度: {state.progress}%</div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {state.status === 'processing' && (\r\n                                    <div className=\"progress-section\">\r\n                                        <div className=\"progress-bar\">\r\n                                            <div className=\"progress\" style={{ width: `${processingProgress}%` }}></div>\r\n                                        </div>\r\n                                        <div className=\"progress-text\">处理进度: {processingProgress}%</div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {previewImage && (\r\n                                    <div className=\"preview-section\">\r\n                                        <h3>图像预览</h3>\r\n                                        <img src={previewImage} alt=\"DICOM预览\" className=\"preview-image\" />\r\n                                    </div>\r\n                                )}\r\n\r\n                                {state.error && (\r\n                                    <div className=\"error-message\">\r\n                                        {state.error}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {state.status === 'completed' && (\r\n                                    <div className=\"success-message\">\r\n                                        处理完成！\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        } />\r\n                        \r\n                        <Route path=\"/compare\" element={\r\n                            <ComparisonView \r\n                                originalImage={selectedFile ? URL.createObjectURL(selectedFile) : null}\r\n                                processedImage={state.result ? `${API_BASE}/uploads/${state.result}` : null}\r\n                            />\r\n                        } />\r\n                        \r\n                        <Route path=\"/data\" element={<DataManager />} />\r\n                    </Routes>\r\n                </main>\r\n            </div>\r\n        </Router>\r\n    );\r\n}\r\n\r\n// 导出 App 组件，以便在其他文件中使用\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}