{"ast":null,"code":"// 定义action类型\nexport const UPLOAD_ACTIONS = {\n  SET_FILE: 'upload/setFile',\n  START_UPLOAD: 'upload/startUpload',\n  UPLOAD_PROGRESS: 'upload/progress',\n  UPLOAD_SUCCESS: 'upload/success',\n  UPLOAD_ERROR: 'upload/error',\n  START_PROCESSING: 'upload/startProcessing',\n  PROCESSING_STATUS: 'upload/processingStatus',\n  PROCESSING_SUCCESS: 'upload/processingSuccess',\n  PROCESSING_ERROR: 'upload/processingError',\n  UPDATE_PREVIEW: 'upload/updatePreview',\n  UPDATE_MATLAB_LOG: 'upload/updateMatlabLog',\n  RESET: 'upload/reset'\n};\n\n// 初始状态\nconst initialState = {\n  selectedFile: null,\n  uploadStatus: 'idle',\n  // 'idle' | 'uploading' | 'success' | 'error'\n  uploadProgress: 0,\n  uploadedImage: null,\n  processingStatus: 'idle',\n  // 'idle' | 'processing' | 'success' | 'error'\n  taskId: null,\n  previewImage: null,\n  matlabLog: '',\n  processedImages: {},\n  analysisResults: null,\n  error: null\n};\n\n// reducer函数\nexport default function uploadReducer(state = initialState, action) {\n  switch (action.type) {\n    case UPLOAD_ACTIONS.SET_FILE:\n      return {\n        ...state,\n        selectedFile: action.payload,\n        uploadStatus: 'idle',\n        uploadProgress: 0,\n        uploadedImage: null,\n        processingStatus: 'idle',\n        error: null\n      };\n    case UPLOAD_ACTIONS.START_UPLOAD:\n      return {\n        ...state,\n        uploadStatus: 'uploading',\n        uploadProgress: 0,\n        error: null\n      };\n    case UPLOAD_ACTIONS.UPLOAD_PROGRESS:\n      return {\n        ...state,\n        uploadProgress: action.payload\n      };\n    case UPLOAD_ACTIONS.UPLOAD_SUCCESS:\n      return {\n        ...state,\n        uploadStatus: 'success',\n        uploadedImage: action.payload,\n        error: null\n      };\n    case UPLOAD_ACTIONS.UPLOAD_ERROR:\n      return {\n        ...state,\n        uploadStatus: 'error',\n        error: action.payload\n      };\n    case UPLOAD_ACTIONS.START_PROCESSING:\n      return {\n        ...state,\n        processingStatus: 'processing',\n        taskId: action.payload,\n        error: null\n      };\n    case UPLOAD_ACTIONS.PROCESSING_STATUS:\n      return {\n        ...state,\n        processingStatus: 'processing',\n        matlabLog: action.payload.log || state.matlabLog\n      };\n    case UPLOAD_ACTIONS.PROCESSING_SUCCESS:\n      return {\n        ...state,\n        processingStatus: 'success',\n        processedImages: action.payload.images || {},\n        analysisResults: action.payload.results || null,\n        error: null\n      };\n    case UPLOAD_ACTIONS.PROCESSING_ERROR:\n      return {\n        ...state,\n        processingStatus: 'error',\n        error: action.payload\n      };\n    case UPLOAD_ACTIONS.UPDATE_PREVIEW:\n      return {\n        ...state,\n        previewImage: action.payload\n      };\n    case UPLOAD_ACTIONS.UPDATE_MATLAB_LOG:\n      return {\n        ...state,\n        matlabLog: action.payload\n      };\n    case UPLOAD_ACTIONS.RESET:\n      return initialState;\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["UPLOAD_ACTIONS","SET_FILE","START_UPLOAD","UPLOAD_PROGRESS","UPLOAD_SUCCESS","UPLOAD_ERROR","START_PROCESSING","PROCESSING_STATUS","PROCESSING_SUCCESS","PROCESSING_ERROR","UPDATE_PREVIEW","UPDATE_MATLAB_LOG","RESET","initialState","selectedFile","uploadStatus","uploadProgress","uploadedImage","processingStatus","taskId","previewImage","matlabLog","processedImages","analysisResults","error","uploadReducer","state","action","type","payload","log","images","results"],"sources":["D:/GitHub/mri-web-app/frontend/src/store/reducers/uploadReducer.js"],"sourcesContent":["// 定义action类型\r\nexport const UPLOAD_ACTIONS = {\r\n    SET_FILE: 'upload/setFile',\r\n    START_UPLOAD: 'upload/startUpload',\r\n    UPLOAD_PROGRESS: 'upload/progress',\r\n    UPLOAD_SUCCESS: 'upload/success',\r\n    UPLOAD_ERROR: 'upload/error',\r\n    START_PROCESSING: 'upload/startProcessing',\r\n    PROCESSING_STATUS: 'upload/processingStatus',\r\n    PROCESSING_SUCCESS: 'upload/processingSuccess',\r\n    PROCESSING_ERROR: 'upload/processingError',\r\n    UPDATE_PREVIEW: 'upload/updatePreview',\r\n    UPDATE_MATLAB_LOG: 'upload/updateMatlabLog',\r\n    RESET: 'upload/reset'\r\n};\r\n\r\n// 初始状态\r\nconst initialState = {\r\n    selectedFile: null,\r\n    uploadStatus: 'idle', // 'idle' | 'uploading' | 'success' | 'error'\r\n    uploadProgress: 0,\r\n    uploadedImage: null,\r\n    processingStatus: 'idle', // 'idle' | 'processing' | 'success' | 'error'\r\n    taskId: null,\r\n    previewImage: null,\r\n    matlabLog: '',\r\n    processedImages: {},\r\n    analysisResults: null,\r\n    error: null\r\n};\r\n\r\n// reducer函数\r\nexport default function uploadReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case UPLOAD_ACTIONS.SET_FILE:\r\n            return {\r\n                ...state,\r\n                selectedFile: action.payload,\r\n                uploadStatus: 'idle',\r\n                uploadProgress: 0,\r\n                uploadedImage: null,\r\n                processingStatus: 'idle',\r\n                error: null\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.START_UPLOAD:\r\n            return {\r\n                ...state,\r\n                uploadStatus: 'uploading',\r\n                uploadProgress: 0,\r\n                error: null\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.UPLOAD_PROGRESS:\r\n            return {\r\n                ...state,\r\n                uploadProgress: action.payload\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.UPLOAD_SUCCESS:\r\n            return {\r\n                ...state,\r\n                uploadStatus: 'success',\r\n                uploadedImage: action.payload,\r\n                error: null\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.UPLOAD_ERROR:\r\n            return {\r\n                ...state,\r\n                uploadStatus: 'error',\r\n                error: action.payload\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.START_PROCESSING:\r\n            return {\r\n                ...state,\r\n                processingStatus: 'processing',\r\n                taskId: action.payload,\r\n                error: null\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.PROCESSING_STATUS:\r\n            return {\r\n                ...state,\r\n                processingStatus: 'processing',\r\n                matlabLog: action.payload.log || state.matlabLog\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.PROCESSING_SUCCESS:\r\n            return {\r\n                ...state,\r\n                processingStatus: 'success',\r\n                processedImages: action.payload.images || {},\r\n                analysisResults: action.payload.results || null,\r\n                error: null\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.PROCESSING_ERROR:\r\n            return {\r\n                ...state,\r\n                processingStatus: 'error',\r\n                error: action.payload\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.UPDATE_PREVIEW:\r\n            return {\r\n                ...state,\r\n                previewImage: action.payload\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.UPDATE_MATLAB_LOG:\r\n            return {\r\n                ...state,\r\n                matlabLog: action.payload\r\n            };\r\n            \r\n        case UPLOAD_ACTIONS.RESET:\r\n            return initialState;\r\n            \r\n        default:\r\n            return state;\r\n    }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}